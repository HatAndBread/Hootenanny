(this["webpackJsonpnoise-rooms"]=this["webpackJsonpnoise-rooms"]||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(6),o=n.n(s),c=n(74),i=n.n(c),r=(n(82),n(10)),l=(n(83),n(14)),u=n(15);n(45);function d(e){var t=e.sessionPin,n=e.userName,o=Object(s.useContext)(Gn).dropDownOut,c=Object(s.useContext)(Gn).setDropDownOut,i=Object(s.useContext)(Gn).users,r=Object(s.useRef)();Object(s.useEffect)((function(){o&&(r.current.style.top="0px")}),[o]);return Object(a.jsxs)("div",{ref:r,className:"dropdown-menu",onClick:function(){r.current.style.top="-100vh",c(!1)},children:[Object(a.jsxs)("h3",{children:["Session pin: ",t||"Not joined"]}),Object(a.jsxs)("h3",{children:["Your username: ",n||"None"]}),Object(a.jsx)("h3",{children:"Current band members: "}),Object(a.jsx)("ol",{children:i&&i.users&&i.users.map((function(e){return Object(a.jsxs)("li",{children:[e.userName,": ",e.instrument]},e.userName)}))})]})}n(54);var b=n(51),m=n(42),j=n.p+"static/media/ios_install.c7aafd0f.PNG";function h(e){var t=e.title,n=e.info,s=e.emoji,o=e.install;return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("h2",{children:t}),Object(a.jsx)("div",{className:"emoji",children:s}),Object(a.jsx)("p",{children:n}),o&&Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:["It is possible to install One Hand Band on the home screen of your mobile device without using an app store. It's free! ",Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:["\u2460",Object(a.jsx)("img",{src:j,alt:"ios  button",style:{borderRadius:"8px"},width:"40px"})," on iOS or",Object(a.jsx)("img",{src:"data:image/png;base64,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",alt:"ios  button",style:{borderRadius:"8px"}}),"on Android."]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("br",{}),'\u2461 "Add to Home Screen"']})]})]})]})}function p(){var e=Object(s.useContext)(Gn).sessionPin,t=Object(s.useContext)(Gn).setOpenedFromLanding;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"home-container",children:[Object(a.jsx)("h1",{children:"ONE HAND BAND"}),Object(a.jsxs)("div",{className:"home-button-container",children:[Object(a.jsx)(l.b,{to:"/host",className:"home-btn",children:"Host a room"}),Object(a.jsx)(l.b,{to:"/join",className:"home-btn",children:"Join a room"}),Object(a.jsx)(l.b,{to:"/instrument/keyboard",className:"home-btn",onClick:function(){t(!0)},children:e?"Instruments":"Play solo"})]})]}),Object(a.jsxs)("div",{className:"home-content",children:[Object(a.jsx)("iframe",{width:"300",src:"https://www.youtube.com/embed/XWfBwchcjDM",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:"video",allowFullScreen:!0}),Object(a.jsx)("h2",{children:"How It Works"}),Object(a.jsxs)("div",{className:"cards-container",children:[Object(a.jsx)(h,{title:"Play Music Live Online",info:"ONE HAND BAND lets you make music on your mobile device or computer. Choose from a sampler keyboard, drum machine, drone machine, or noise machine. Although One Hand Band works fine with an old fashioned desktop or laptop, a touch screen is highly recommended for the best experience. \ud83d\udc49\ud83d\udcf1\u2728",emoji:"\ud83e\ude95"}),Object(a.jsx)(h,{title:"Play solo",info:"Don't have any friends? Don't worry! Click \"Play solo\" to play by yourself.",emoji:"\ud83e\uddda\u200d\u2640\ufe0f"}),Object(a.jsx)(h,{title:"Play with friends",info:'Have friends? Click "Host a room" and share the generated pin number with up to four of your friends. You should be able to hear the noise that your friends are making from anywhere in the world with only a slight delay.',emoji:"\ud83d\udc6f\u200d\u2640\ufe0f"}),Object(a.jsx)(h,{title:"Installation",info:"",install:!0,emoji:"\ud83d\udcf1"})]})]}),Object(a.jsxs)("footer",{children:[Object(a.jsxs)("div",{className:"link-icons",children:[Object(a.jsx)("a",{className:"fa",href:"https://github.com/HatAndBread",children:Object(a.jsx)(b.a,{icon:m.a})}),Object(a.jsx)("a",{className:"fa",href:"https://www.paypal.com/paypalme/hatandbread",children:Object(a.jsx)(b.a,{icon:m.b})})]}),"Enjoy Hootenanny? Buy me a ",Object(a.jsx)("a",{href:"https://www.paypal.com/paypalme/hatandbread",children:"beer \ud83c\udf7a"})," or",Object(a.jsx)("a",{href:"https://github.com/HatAndBread",children:" give me a job."})]})]})}function O(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:"This is the about page!"})})}var f=n(12),v=n(9);n(56);function x(e){var t=e.myNumber,n=e.updateChords,s=e.myData,o=e.removeChord;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{className:"chord-definer",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("label",{htmlFor:"chord",children:["Chord",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{name:"chord",onChange:function(e){var a=Object(v.a)({},s);a.chord=e.target.value,n(t,a)},value:s.chord,children:[Object(a.jsx)("option",{value:"silence",children:"Silence"}),Object(a.jsx)("option",{value:"C",children:"C"}),Object(a.jsx)("option",{value:"Cm",children:"Cm"}),Object(a.jsx)("option",{value:"C#",children:"C#"}),Object(a.jsx)("option",{value:"C#m",children:"C#m"}),Object(a.jsx)("option",{value:"D",children:"D"}),Object(a.jsx)("option",{value:"Dm",children:"Dm"}),Object(a.jsx)("option",{value:"D#",children:"D#"}),Object(a.jsx)("option",{value:"D#m",children:"D#m"}),Object(a.jsx)("option",{value:"E",children:"E"}),Object(a.jsx)("option",{value:"Em",children:"Em"}),Object(a.jsx)("option",{value:"F",children:"F"}),Object(a.jsx)("option",{value:"Fm",children:"Fm"}),Object(a.jsx)("option",{value:"F#",children:"F#"}),Object(a.jsx)("option",{value:"F#m",children:"F#m"}),Object(a.jsx)("option",{value:"G",children:"G"}),Object(a.jsx)("option",{value:"Gm",children:"Gm"}),Object(a.jsx)("option",{value:"G#",children:"G#"}),Object(a.jsx)("option",{value:"G#m",children:"G#m"}),Object(a.jsx)("option",{value:"A",children:"A"}),Object(a.jsx)("option",{value:"Am",children:"Am"}),Object(a.jsx)("option",{value:"A#",children:"A#"}),Object(a.jsx)("option",{value:"A#m",children:"A#m"}),Object(a.jsx)("option",{value:"B",children:"B"}),Object(a.jsx)("option",{value:"Bm",children:"Bm"})]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{htmlFor:"chord-length",children:["Length ",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{name:"chord-length",onChange:function(e){var a=Object(v.a)({},s);a.length=parseInt(e.target.value,10),n(t,a)},value:s.length,children:[Object(a.jsx)("option",{value:1,children:"Quarter note"}),Object(a.jsx)("option",{value:2,children:"Half note"}),Object(a.jsx)("option",{value:3,children:"Dotted half note"}),Object(a.jsx)("option",{value:4,children:"Whole note"})]})]})}),Object(a.jsx)("div",{className:"closer",onClick:function(){o(t)},children:"\uff38"})]})]})}function g(){var e=Object(s.useContext)(Gn).chordProgression,t=Object(s.useContext)(Gn).setChordProgression,n=(Object(s.useContext)(Gn).fullLengthChordProgression,Object(s.useContext)(Gn).setFullLengthChordProgression),o=Object(s.useContext)(Gn).timeSignature,c=function(n,a){var s=Object(f.a)(e);s[n]=a,t(s)},i=function(n){var a=Object(f.a)(e);a.splice(n,1),console.log(a),t(a)};return Object(s.useEffect)((function(){var t=[];e.forEach((function(e){for(var n=0;n<4*e.length;n++)t.push(e)}));var a=t.length%(4*o);if(0!==a)for(var s=0;s<4*o-a;s++)t.push({chord:"silence",length:1});n(t)}),[e,o,n]),Object(a.jsxs)("div",{className:"chord-progression-container",children:[Object(a.jsx)("button",{onClick:function(){var n=Object(f.a)(e);n.push({chord:"silence",length:1}),t(n)},children:"Add New Chord"}),e.map((function(e,t){return Object(a.jsx)(x,{myNumber:t,updateChords:c,myData:e,removeChord:i},t)})),e.length>1&&Object(a.jsxs)("div",{children:[Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){t([])},children:"\u26a0\ufe0fDelete all\u26a0\ufe0f"})]})]})}n(90);var y=n.p+"static/media/loader.6103cd83.gif";function k(){var e=Object(s.useContext)(Gn).openedFromLanding,t=Object(s.useState)(!1),n=Object(r.a)(t,2),o=n[0],c=n[1];return Object(a.jsx)("div",{className:"loading",children:e?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Loading audio files..."}),Object(a.jsx)("div",{children:"Please wait \u2728"}),Object(a.jsx)("img",{src:y,alt:" "})]}):Object(a.jsx)("div",{children:o?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Loading audio files..."}),Object(a.jsx)("div",{children:"Please wait \u2728"}),Object(a.jsx)("img",{src:y,alt:" "})]}):Object(a.jsx)("button",{onClick:function(){c(!0)},children:"Load audio \u2728"})})})}n(35);function C(e){var t=e.forInstrument,n=Object(u.f)().pathname,s="".concat(t[0].toUpperCase()).concat(t.substring(1,t.length));return Object(a.jsxs)("div",{children:[n==="/instrument/".concat(t)&&Object(a.jsx)("div",{className:"settings-link-container",children:Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/settings"),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/effects"),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]})}),n==="/instrument/".concat(t,"/settings")&&Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/effects"),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]}),n==="/instrument/".concat(t,"/effects")&&Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/settings"),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]})]})}var w=n(76),N=n.n(w)()("/");function S(e,t,n,a,s,o){if(void 0===a)throw new Error("missing sessionPin");a&&!s&&N.emit("settingsChange",e,t,n,a),o&&o.setSettings(n,e)}function A(e){var t=e.instrument,n=Object(s.useContext)(Gn).globalInstrumentSettings[t],o=Object(s.useContext)(Gn).setGlobalInstrumentSettings,c=Object(s.useContext)(Gn).sessionPin,i=Object(s.useContext)(Gn).soundSet,r=Object(s.useContext)(Gn).globalInstrumentSettings,l=Object(s.useContext)(Gn).socketId,u=function(e){var n=JSON.parse(JSON.stringify(r));n[t].envelope[e.target.name]=e.target.value,o(n),S(n[t],l,t,c,!1,i)};return Object(a.jsxs)("div",{className:"envelope",children:[Object(a.jsx)("label",{htmlFor:"attack",children:"Attack"}),Object(a.jsx)("input",{type:"range",name:"attack",onChange:u,defaultValue:n.envelope.attack,min:"0",max:"1",step:"0.01"}),Object(a.jsx)("label",{htmlFor:"sustain",children:"Sustain"}),Object(a.jsx)("input",{type:"range",name:"sustain",onChange:u,defaultValue:n.envelope.sustain,min:"0",max:"1",step:"0.01"}),Object(a.jsx)("label",{htmlFor:"decay",children:"Decay"}),Object(a.jsx)("input",{type:"range",name:"decay",onChange:u,defaultValue:n.envelope.decay,min:"0",max:"1",step:"0.1"}),Object(a.jsx)("label",{htmlFor:"release",children:"Release"}),Object(a.jsx)("input",{type:"range",name:"release",onChange:u,defaultValue:n.envelope.release,min:"0.01",max:"3",step:"0.01"})]})}function D(e){var t=e.instrument,n=e.setSettingsOpen,o=Object(s.useContext)(Gn).setGlobalInstrumentSettings,c=Object(s.useContext)(Gn).globalInstrumentSettings,i=Object(s.useContext)(Gn).sessionPin,r=Object(s.useContext)(Gn).socketId,l=Object(s.useContext)(Gn).soundSet;Object(s.useEffect)((function(){return n(!0),function(){n(!1)}}),[n]);return Object(a.jsx)("div",{className:"settings-container",children:Object(a.jsxs)("div",{className:"main-settings-container",children:[Object(a.jsx)("label",{htmlFor:"volume",children:"Volume"}),Object(a.jsx)("input",{type:"range",id:"volume",name:"volume",min:"0",max:"1",step:"0.05",defaultValue:c[t].volume,onChange:function(e){var n=JSON.parse(JSON.stringify(c));console.log(e.target.name),n[t][e.target.name]=e.target.value,o(n),S(n[t],r,t,i,!1,l)}}),function(){switch(t){case"drone":case"keyboard":return Object(a.jsx)(A,{instrument:t});case"noise":return;case"theremin":return Object(a.jsx)(A,{instrument:t});case"percussion":case"skronk":default:return}}()]})})}function E(e,t,n,a,s,o){if(void 0===a)throw new Error("missing sessionPin");a&&!s&&N.emit("effectsChange",e,t,n,a),o&&o.setEffects(n,e)}n(72);var I={backgroundColor:"#6249e9",color:"snow"},R={backgroundColor:"gray",color:"snow"};function P(e){var t=e.type,n=e.params,o=e.instrument,c=Object(s.useContext)(Gn).sessionPin,i=Object(s.useContext)(Gn).getGlobalEffects,l=Object(s.useContext)(Gn).socketId,u=Object(s.useContext)(Gn).globalEffectsSettings[o],d=Object(s.useContext)(Gn).soundSet,b=Object(s.useContext)(Gn).setGlobalEffectsSettings,m=Object(s.useState)(u[t].on?I:R),j=Object(r.a)(m,2),h=j[0],p=j[1],O=function(e){var n=i();n[o][t][e.target.dataset.type].level=e.target.value,b(n),E(n,l,o,c,!1,d)};return Object(a.jsxs)("div",{className:"individual-effect",children:[Object(a.jsx)("button",{onClick:function(){var e=i();h===R?(e[o][t].on=!0,b(e),E(e,l,o,c,!1,d),p(I)):(e[o][t].on=!1,b(e),E(e,l,o,c,!1,d),p(R)),b(e)},style:h,children:t}),Object.entries(n).map((function(e){if("on"!==e[0])return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("label",{children:e[0][0].toUpperCase()+e[0].substring(1,e[0].length)+""}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{"data-type":e[0],type:"range",defaultValue:e[1].level,min:e[1].min,max:e[1].max,step:e[1].step,onChange:O})]},e[0])}))]})}function M(e){var t=e.instrument,n=e.setSettingsOpen,o=Object(s.useContext)(Gn).globalEffectsSettings[t];return Object(s.useEffect)((function(){return n(!0),function(){n(!1)}}),[n]),Object(a.jsxs)("div",{className:"effects-container",children:[Object(a.jsx)(P,{type:"distortion",params:o.distortion,instrument:t}),Object(a.jsx)(P,{type:"delay",params:o.delay,instrument:t})]})}n(40);var L={backgroundColor:"#9d8df1",borderColor:"#9d8df1",height:"29vh"},F={backgroundColor:"black"},G={backgroundColor:"#9d8df1",height:"98%"},B={backgroundColor:"ivory"};function W(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),o=n[0],c=n[1],i=Object(s.useState)(!1),l=Object(r.a)(i,2),u=l[0],d=l[1],b=Object(s.useContext)(H),m=Object(s.useRef)(null),j=Object(s.useRef)(null),h=function(e){e.preventDefault()};return Object(s.useEffect)((function(){b.pointerDown||(c(!1),d(!1))}),[b.pointerDown]),Object(s.useEffect)((function(){b.pointerDown&&(j.current&&J(j.current.offsetHeight,j.current.offsetWidth,j.current.offsetTop,j.current.offsetLeft,b.touches.x,b.touches.y)?e.blackKey!==b.currentNote.note?(d(!0),c(!1),b.setCurrentNote({note:e.blackKey.toUpperCase(),octave:e.octave+b.mainOctave})):e.blackKey===b.currentNote.note&&d(!0):J(m.current.offsetHeight,m.current.offsetWidth,m.current.offsetTop,m.current.offsetLeft,b.touches.x,b.touches.y,e.precededByBlack)?e.octave+b.mainOctave!==b.currentNote.octave||e.note!==b.currentNote.note?(b.setCurrentNote({note:e.note.toUpperCase(),octave:e.octave+b.mainOctave}),c(!0),d(!1)):e.note===b.currentNote.note&&c(!0):j.current&&J(j.current.offsetHeight,j.current.offsetWidth,j.current.offsetTop,j.current.offsetLeft,b.secondTouch.x,b.secondTouch.y)?e.blackKey!==b.secondNote.note?(d(!0),c(!1),b.setSecondNote({note:e.blackKey.toUpperCase(),octave:e.octave+b.mainOctave})):e.blackKey===b.currentNote.note&&d(!0):J(m.current.offsetHeight,m.current.offsetWidth,m.current.offsetTop,m.current.offsetLeft,b.secondTouch.x,b.secondTouch.y,e.precededByBlack)?(e.octave+b.mainOctave!==b.secondNote.octave||e.note!==b.secondNote.note)&&(b.setSecondNote({note:e.note.toUpperCase(),octave:e.octave+b.mainOctave}),c(!0),d(!1)):(c(!1),d(!1)))}),[b.pointerDown,b,e.note,e.octave,e.blackKey,e.precededByBlack]),Object(a.jsx)("div",{className:"white-key","data-note":e.note,ref:m,onDragStart:h,style:o?G:B,children:e.blackKey&&Object(a.jsx)("div",{className:"black-key","data-note":e.blackKey,ref:j,onDragStart:h,style:u?L:F})})}var J=function(e,t,n,a,s,o,c){return s>a&&s<a+t-1&&o>n&&o<n+e&&!(c&&s<=a+1+t/4&&o<20+n+.6*e)};function T(e){var t=e.windowWidth,n=e.windowHeight,s=e.lastOctave,o=e.octave;return Object(a.jsxs)("div",{className:"keyboard-keys",style:t>n?{width:"".concat(t/2,"px")}:{width:"100%"},onContextMenu:function(e){e.preventDefault()},children:[Object(a.jsx)(W,{note:"C",blackKey:"C#",octave:o}),Object(a.jsx)(W,{note:"D",blackKey:"D#",octave:o,precededByBlack:1}),Object(a.jsx)(W,{note:"E",octave:o,precededByBlack:1}),Object(a.jsx)(W,{note:"F",blackKey:"F#",octave:o}),Object(a.jsx)(W,{note:"G",blackKey:"G#",octave:o,precededByBlack:1}),Object(a.jsx)(W,{note:"A",blackKey:"A#",octave:o,precededByBlack:1}),Object(a.jsx)(W,{note:"B",octave:o,precededByBlack:1}),s&&Object(a.jsx)(W,{note:"C",octave:1===o?2:3})]})}function U(e){var t=e.instrument,n=Object(s.useContext)(Gn).globalInstrumentSettings,o=Object(s.useContext)(Gn).setGlobalInstrumentSettings,c=Object(s.useContext)(Gn).sessionPin,i=Object(s.useContext)(Gn).socketId,r=Object(s.useContext)(Gn).soundSet;return Object(a.jsxs)("select",{onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].wave=e.target.value,o(a),S(a[t],i,t,c,!1,r)},defaultValue:n[t].wave,children:[Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"}),Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"piano",children:"piano"}),Object(a.jsx)("option",{value:"gamelan",children:"gamelan"}),Object(a.jsx)("option",{value:"gamelan2",children:"gamelan2"}),Object(a.jsx)("option",{value:"gamelan3",children:"gamelan3"}),Object(a.jsx)("option",{value:"kalimba",children:"kalimba"}),Object(a.jsx)("option",{value:"oud",children:"oud"}),Object(a.jsx)("option",{value:"trumpet",children:"trumpet"}),Object(a.jsx)("option",{value:"organ",children:"organ"}),Object(a.jsx)("option",{value:"oboe",children:"oboe"}),Object(a.jsx)("option",{value:"kazoo",children:"kazoo"}),Object(a.jsx)("option",{value:"ruler",children:"ruler"}),Object(a.jsx)("option",{value:"spring",children:"spring"}),Object(a.jsx)("option",{value:"tambura",children:"tambura"}),Object(a.jsx)("option",{value:"voice",children:"voice"}),Object(a.jsx)("option",{value:"harmonium",children:"harmonium"}),Object(a.jsx)("option",{value:"violin",children:"violin"}),Object(a.jsx)("option",{value:"cello",children:"cello"}),Object(a.jsx)("option",{value:"saw",children:"saw"}),Object(a.jsx)("option",{value:"singing",children:"singing"}),Object(a.jsx)("option",{value:"swell",children:"swell"})]})}var z={backgroundColor:"#6249e9",borderRadius:"0px"},V={backgroundColor:"gray",borderRadius:"0px"};function Y(e){var t=e.setPointerDown,n=e.setOctave,o=Object(s.useContext)(Gn).keyboardInfinity,c=Object(s.useContext)(Gn).setKeyboardInfinity,i=Object(s.useContext)(Gn).mainOctave,l=Object(s.useState)(o?z:V),u=Object(r.a)(l,2),d=u[0],b=u[1],m=Object(s.useState)([V,V,z,V,V,V]),j=Object(r.a)(m,2),h=j[0],p=j[1];Object(s.useEffect)((function(){for(var e=new Array(6),t=0;t<e.length;t++)e[t]=t===i?z:V;p(e)}),[i,o]);for(var O=function(e){n(parseInt(e.target.value,10));for(var t=[],a=0;a<h.length;a++)a===parseInt(e.target.value,10)?t.push(z):t.push(V);p(t)},f=function(){o?(c(!1),t(!1),b(V)):(c(!0),b(z))},v=[],x=["0","1","2","3","4","5","\u267e"],g=0;g<8;g++)g<7&&v.push(Object(a.jsx)("button",{style:g<6?h[g]:d,value:g,onClick:g<6?O:f,children:x[g]},g)),7===g&&v.push(Object(a.jsx)(U,{instrument:"keyboard"},g));return Object(a.jsx)("div",{className:"octave-setter-container",children:v.map((function(e){return e}))})}var H=Object(s.createContext)();function Z(e){var t=e.setFinalData,n=Object(s.useContext)(Gn).keyboardInfinity,o=Object(s.useState)({width:window.innerWidth,height:window.innerHeight}),c=Object(r.a)(o,2),i=c[0],l=c[1],u=Object(s.useState)({x:null,y:null}),d=Object(r.a)(u,2),b=d[0],m=d[1],j=Object(s.useState)(!!n),h=Object(r.a)(j,2),p=h[0],O=h[1],f=Object(s.useState)({note:null,octave:1}),v=Object(r.a)(f,2),x=v[0],g=v[1],y=Object(s.useState)({x:null,y:null}),k=Object(r.a)(y,2),C=k[0],w=k[1],N=Object(s.useState)({note:null,octave:1}),S=Object(r.a)(N,2),A=S[0],D=S[1],E=Object(s.useContext)(Gn).mainOctave,I=Object(s.useContext)(Gn).setMainOctave,R=Object(s.useState)(!1),P=Object(r.a)(R,2),M=P[0],L=P[1];return Object(s.useEffect)((function(){var e=function(e){return"touch"===e.pointerType?L(!0):L(!1)};return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[]),Object(s.useEffect)((function(){var e=function(){n||(O(!1),g({note:null,octave:1}))},t=function(){return l({width:window.innerWidth,height:window.innerHeight})},a=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||m({x:e.x,y:e.y})},s=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||(!M&&g({note:null,octave:1}),m({x:e.x,y:e.y}),O(!0))},o=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||e.preventDefault()},c=function(e){"white-key"!==e.touches[0].target.className&&"black-key"!==e.touches[0].target.className||(m({x:Math.floor(e.touches[0].clientX),y:Math.floor(e.touches[0].clientY)}),O(!0)),e.touches[1]&&("white-key"!==e.touches[1].target.className&&"black-key"!==e.touches[1].target.className||w({x:Math.floor(e.touches[1].clientX),y:Math.floor(e.touches[1].clientY)}))},i=function(e){e.touches.length&&!n?(w({x:null,y:null}),D({note:null,octave:1})):n||(O(!1),g({note:null,octave:1}))};return M?(window.addEventListener("touchstart",c),window.addEventListener("touchend",i),window.addEventListener("touchmove",c)):(window.addEventListener("pointerup",e),window.addEventListener("pointerdown",s),window.addEventListener("pointermove",a)),window.addEventListener("resize",t),window.addEventListener("click",o),window.addEventListener("mousedown",o),function(){window.removeEventListener("resize",t),window.removeEventListener("click",o),window.removeEventListener("mousedown",o),M?(window.removeEventListener("touchstart",c),window.removeEventListener("touchend",i),window.removeEventListener("touchmove",c)):(window.removeEventListener("pointerup",e),window.removeEventListener("pointerdown",s),window.removeEventListener("pointermove",a))}}),[n,M]),Object(s.useEffect)((function(){x.note?t({data:x,type:"play"}):t({data:"stop",type:"stop"})}),[x,t]),Object(s.useEffect)((function(){A.note?t({data:A,type:"play",second:!0}):t({data:"stop",type:"stop",second:!0})}),[A,t]),Object(a.jsxs)(H.Provider,{value:{pointerDown:p,setTouches:m,touches:b,secondTouch:C,setSecondTouch:w,secondNote:A,setSecondNote:D,setCurrentNote:g,currentNote:x,mainOctave:E},children:[Object(a.jsx)(Y,{setPointerDown:O,setOctave:I}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(T,{windowWidth:i.width,windowHeight:i.height,lastOctave:!(i.width>i.height),octave:1}),i.width>i.height&&Object(a.jsx)(T,{windowWidth:i.width,windowHeight:i.height,lastOctave:!0,octave:2})]})]})}n(41);var Q=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function X(e){var t=e.number,n=e.droneData,o=e.setDroneData,c=e.chordChange,i=e.setChordChange,l=Object(s.useState)("C3"),u=Object(r.a)(l,2),d=u[0],b=u[1],m=Object(s.useRef)();return Object(s.useEffect)((function(){m.current.value=function(e){var t;t=e.includes("#")?e.substring(0,2):e[0];var n=e[e.length-1];return Q.indexOf(t)+12*n}(n[t].pitch),b(n[t].pitch),i(!1)}),[c,i,t,n]),Object(a.jsxs)("div",{className:"pitch-fader",children:[Object(a.jsx)("label",{htmlFor:"range-fader",children:"Pitch: "}),Object(a.jsx)("input",{ref:m,type:"range",name:"range-fader",onChange:function(e){var a="".concat(Q[e.target.value%12]).concat(Math.floor(e.target.value/12));b(a);var s=JSON.parse(JSON.stringify(n));s[t].pitch=a,o(s)},min:"12",max:"72",defaultValue:"36"}),Object(a.jsx)("label",{className:"pitch-label",htmlFor:"range-fader",children:d})]})}function K(e){var t=e.number,n=e.droneData,s=e.setDroneData;return Object(a.jsxs)("div",{className:"volume-fader",children:[Object(a.jsx)("label",{htmlFor:"volume-fader",min:"0",max:"100",children:"Vol."}),Object(a.jsx)("input",{type:"range",name:"volume-fader",min:"-12",max:"1",step:"0.05",defaultValue:n[t].volume,onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].volume=e.target.value,s(a)}})]})}var q={backgroundColor:"red",color:"white"},_={backgroundColor:"green",color:"white"};function $(e){var t=e.number,n=e.droneData,o=e.setDroneData,c=Object(s.useState)(n[t].playing?"Stop":"Start"),i=Object(r.a)(c,2),l=i[0],u=i[1],d=Object(s.useState)(n[t].playing?q:_),b=Object(r.a)(d,2),m=b[0],j=b[1];return Object(s.useEffect)((function(){u(n[t].playing?"Stop":"Start"),n[t].playing?j(q):j(_)}),[n,t]),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(n));"Start"===l?(u("Stop"),e[t].playing=!0):(u("Start"),e[t].playing=!1),o(e)},style:m,children:l})})}function ee(e){e.name;var t=e.number,n=e.droneData,s=e.setDroneData;return Object(a.jsxs)("select",{onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].wave=e.target.value,s(a)},defaultValue:n[t].wave,children:[Object(a.jsx)("option",{value:"harmonium",children:"harmonium"}),Object(a.jsx)("option",{value:"tambura",children:"tambura"}),Object(a.jsx)("option",{value:"organ",children:"organ"}),Object(a.jsx)("option",{value:"cello",children:"cello"}),Object(a.jsx)("option",{value:"kazoo",children:"kazoo"}),Object(a.jsx)("option",{value:"voice",children:"voice"}),Object(a.jsx)("option",{value:"oboe",children:"oboe"}),Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"}),Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"singing",children:"singing"}),Object(a.jsx)("option",{value:"violin",children:"violin"}),Object(a.jsx)("option",{value:"saw",children:"saw"})]})}var te={backgroundColor:"#6249e9",borderRadius:"0px"},ne={backgroundColor:"#41463d",borderRadius:"0px"};function ae(e){var t=e.value,n=e.octave,o=e.setOctave,c=e.setChordUpdated,i=Object(s.useState)(ne),l=Object(r.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){d(n===t?te:ne)}),[n,t]),Object(a.jsxs)("button",{value:t,onClick:function(){o(t),c(!1)},style:u,children:["Octave ",t]})}var se={padding:"0",backgroundColor:"#6249e9",borderRadius:"0px"},oe={padding:"0",backgroundColor:"#41463d",borderRadius:"0px"};function ce(e){var t=e.note,n=e.chord,o=e.setChord,c=e.setChordChange,i=Object(s.useState)(oe),l=Object(r.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){d(n===t?se:oe)}),[n,t]),Object(a.jsx)("button",{style:u,onClick:function(){n!==t?(o(t),c(!0)):o(null)},children:t})}function ie(e,t){var n=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e})),t.current}(t);Object(s.useEffect)((function(){JSON.stringify(n)!==JSON.stringify(t)&&e()}),[t,e,n])}var re=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],le=function(e,t){return function(e,t,n,a){return e[1]=t,e[2]=re[re.indexOf(t)+n],e[3]=re[re.indexOf(t)+7],e[2]||(e[2]=re[re.indexOf(t)-12+n]),e[3]||(e[3]=re[re.indexOf(t)-12+7]),Object.values(e).map((function(e,t,n){return n[t]=e+a}))}({1:null,2:null,3:null},e.includes("#")?e.substring(0,2):e[0],e.includes("m")?3:4,t)},ue=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function de(e){var t=e.droneData,n=e.setDroneData,o=e.chordChange,c=e.setChordChange,i=Object(s.useContext)(Gn).droneChord,r=Object(s.useContext)(Gn).chordUpdated,l=Object(s.useContext)(Gn).setChordUpdated,u=Object(s.useContext)(Gn).setDroneChord,d=Object(s.useContext)(Gn).droneOctave,b=Object(s.useContext)(Gn).setDroneOctave;return ie((function(){var e=JSON.parse(JSON.stringify(t));e.one.pitch="".concat(e.one.pitch.slice(0,e.one.pitch.length-1)).concat(d),e.two.pitch="".concat(e.two.pitch.slice(0,e.two.pitch.length-1)).concat(d),e.three.pitch="".concat(e.three.pitch.slice(0,e.three.pitch.length-1)).concat(d),n(e)}),[d]),Object(s.useEffect)((function(){o&&function(){var e=JSON.parse(JSON.stringify(t)),a=le(i,d);e.one.pitch=a[0],e.two.pitch=a[1],e.three.pitch=a[2],n(e),c(!0),l(!0)}()}),[i,t,d,n,o,r,l,c]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"octave-button-container",children:[Object(a.jsx)(ae,{value:1,octave:d,setOctave:b,setChordUpdated:l}),Object(a.jsx)(ae,{value:2,octave:d,setOctave:b,setChordUpdated:l}),Object(a.jsx)(ae,{value:3,octave:d,setOctave:b,setChordUpdated:l}),Object(a.jsx)(ae,{value:4,octave:d,setOctave:b,setChordUpdated:l}),Object(a.jsx)(ae,{value:5,octave:d,setOctave:b,setChordUpdated:l})]}),Object(a.jsx)("div",{className:"chord-container",children:ue.map((function(e){return Object(a.jsx)(ce,{note:e,chord:i,setChord:u,setChordChange:c},e)}))}),Object(a.jsx)("div",{className:"chord-container",children:ue.map((function(e){return Object(a.jsx)(ce,{note:e+"m",chord:i,setChord:u,setChordChange:c},e)}))})]})}function be(e){var t=e.setFinalData,n=Object(s.useContext)(Gn).droneData,o=Object(s.useContext)(Gn).chordProgressionPlaying,c=Object(s.useContext)(Gn).setChordProgressionPlaying,i=Object(s.useContext)(Gn).setDroneData,r=Object(s.useContext)(Gn).chordChange,u=Object(s.useContext)(Gn).setChordChange;Object(s.useEffect)((function(){t(n)}),[n,t]);var d=function(e){var t=JSON.parse(JSON.stringify(n));"start"===e.target.value?(t.one.playing=!0,t.two.playing=!0,t.three.playing=!0):(t.one.playing=!1,t.two.playing=!1,t.three.playing=!1),i(t)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"drone-top-btns",children:[Object(a.jsx)(l.b,{to:"/instrument/chord-progression",children:"Make Chord Progression"}),Object(a.jsxs)("button",{onClick:function(){c(!o)},children:[o?"Stop":"Play"," Chord Progression"]}),Object(a.jsx)("button",{onClick:d,value:"start",children:"Start All \u25b6\ufe0f"}),Object(a.jsx)("button",{onClick:d,value:"stop",children:"Stop All \u23f9"})]}),Object(a.jsx)(de,{droneData:n,setDroneData:i,chordChange:r,setChordChange:u}),Object(a.jsxs)("div",{className:"drones-container",children:[Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(X,{min:"1",max:"60",defaultValue:"24",number:"one",droneData:n,setDroneData:i,chordChange:r,setChordChange:u}),Object(a.jsx)(K,{number:"one",droneData:n,setDroneData:i}),Object(a.jsx)($,{number:"one",droneData:n,setDroneData:i}),Object(a.jsx)(ee,{name:"drone1",number:"one",droneData:n,setDroneData:i})]}),Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(X,{min:"1",max:"60",defaultValue:"24",number:"two",droneData:n,setDroneData:i,chordChange:r,setChordChange:u}),Object(a.jsx)(K,{number:"two",droneData:n,setDroneData:i}),Object(a.jsx)($,{number:"two",droneData:n,setDroneData:i}),Object(a.jsx)(ee,{name:"drone2",number:"two",droneData:n,setDroneData:i})]}),Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(X,{min:"1",max:"60",defaultValue:"24",number:"three",droneData:n,setDroneData:i,chordChange:r,setChordChange:u}),Object(a.jsx)(K,{number:"three",droneData:n,setDroneData:i}),Object(a.jsx)($,{number:"three",droneData:n,setDroneData:i}),Object(a.jsx)(ee,{name:"drone3",number:"three",droneData:n,setDroneData:i})]})]})]})}n(73);function me(e){var t=e.name,n=e.setWidth,o=e.color,c=Object(s.useRef)();return Object(s.useEffect)((function(){n&&n(c.current.offsetWidth)})),Object(s.useEffect)((function(){if(n){var e=function(){n(c.current.offsetWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}})),Object(a.jsx)("div",{className:"noise-area-container","data-name":t,ref:c,style:o,children:Object(a.jsx)("div",{className:"noise-label",style:{pointerEvents:"none"},children:t})})}var je={backgroundColor:"red"},he={backgroundColor:"#6249e9"};function pe(e){var t=e.setFinalData,n=Object(s.useState)(null),o=Object(r.a)(n,2),c=o[0],i=o[1],l=Object(s.useContext)(Gn).noiseInfinity,u=Object(s.useContext)(Gn).setNoiseInfinity,d=Object(s.useState)({backgroundColor:"gray"}),b=Object(r.a)(d,2),m=b[0],j=b[1],h=Object(s.useState)({backgroundColor:"gray"}),p=Object(r.a)(h,2),O=p[0],f=p[1],x=Object(s.useState)({backgroundColor:"gray"}),g=Object(r.a)(x,2),y=g[0],k=g[1],C=Object(s.useState)({backgroundColor:"gray"}),w=Object(r.a)(C,2),N=w[0],S=w[1];Object(s.useEffect)((function(){var e=function(){return"rgb(".concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),")")},n=function(t){j("Feedback"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),f("Skronk"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),k("Oscillators"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),S("Ambient Noise"===t?{backgroundColor:e()}:{backgroundColor:"gray"})},a=function(e){e.target.dataset&&e.target.dataset.name&&(t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,start:!0,width:c}),n(e.target.dataset.name))},s=function(e){t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,width:c}),n(e.target.dataset.name)},o=function(e){l[function(e){switch(e){case"Ambient Noise":return"ambientNoise";case"Skronk":return"skronk";case"Feedback":return"feedback";case"Oscillators":return"oscillators"}}(e.target.dataset.name)]||(t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,stop:!0}),n())},i=function(e){e.touches[1]&&e.touches[1].target.dataset.name&&t({which:e.touches[1].target.dataset.name,x:e.touches[1].clientX,x2:e.touches[1].clientX,y:e.touches[1].clientY,width:c})};return document.addEventListener("pointerdown",a),document.addEventListener("pointermove",s),document.addEventListener("pointerup",o),document.addEventListener("touchmove",i),function(){document.removeEventListener("pointerdown",a),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",o),document.removeEventListener("touchmove",i)}}),[l,t,c]);var A=function(e){var t=Object(v.a)({},l);t[e.target.value]?t[e.target.value]=!1:t[e.target.value]=!0,u(t)};return Object(a.jsxs)("div",{className:"noise-container",children:[Object(a.jsxs)("div",{className:"infinity-buttons",children:[Object(a.jsxs)("button",{value:"feedback",onClick:A,style:l.feedback?je:he,children:[l.feedback?"\ud83d\ude80":"\u270b",Object(a.jsx)("br",{}),"Feedback"]}),Object(a.jsxs)("button",{value:"skronk",onClick:A,style:l.skronk?je:he,children:[l.skronk?"\ud83d\ude80":"\u270b",Object(a.jsx)("br",{}),"Skronk"]}),Object(a.jsxs)("button",{value:"oscillators",onClick:A,style:l.oscillators?je:he,children:[l.oscillators?"\ud83d\ude80":"\u270b",Object(a.jsx)("br",{}),"Oscillators"]}),Object(a.jsxs)("button",{value:"ambientNoise",onClick:A,style:l.ambientNoise?je:he,children:[l.ambientNoise?"\ud83d\ude80":"\u270b",Object(a.jsx)("br",{}),"Ambient Noise"]})]}),Object(a.jsxs)("div",{className:"noise-row",children:[Object(a.jsx)(me,{name:"Feedback",setWidth:i,color:m}),Object(a.jsx)(me,{name:"Skronk",color:O})]}),Object(a.jsxs)("div",{className:"noise-row",children:[Object(a.jsx)(me,{name:"Oscillators",color:y}),Object(a.jsx)(me,{name:"Ambient Noise",color:N})]})]})}n(121);function Oe(e){var t=e.defaultDrum,n=e.number,o=e.setFinalData,c=e.sampleRate,i=Object(s.useState)(t),l=Object(r.a)(i,2),u=l[0],d=l[1],b=Object(s.useContext)(Gn).percussionData,m=Object(s.useContext)(Gn).setPercussionData,j=Object(s.useContext)(Gn).socketId,h=Object(s.useRef)(),p=function(){return JSON.parse(JSON.stringify(b))},O=function(){h.current.style.backgroundColor="rgb(".concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),")")},f=function(){h.current.style.backgroundColor="#9d8df1"};return Object(a.jsxs)("div",{className:"individual-percussion-container",children:[Object(a.jsx)("select",{onChange:function(e){var t=p();t[n].drum=e.target.value,m(t),d(e.target.value)},defaultValue:t,children:xe.map((function(e){return Object(a.jsx)("option",{children:e},e)}))}),Object(a.jsx)("input",{type:"range",onChange:function(e){var t=p();t[n].sampleRate=e.target.value,m(t)},min:"0.1",max:"3",step:"0.01",defaultValue:c}),Object(a.jsx)("div",{className:"hit-pad",onClick:function(){o({type:"percussion",drum:u,volume:b[n].volume,sampleRate:b[n].sampleRate,number:n,socketId:j})},ref:h,onTouchStart:O,onTouchEnd:f,onMouseDown:O,onMouseUp:f})]})}function fe(e){var t=e.number,n=Object(s.useContext)(Gn).loopData,o=Object(s.useContext)(Gn).setLoopData;return Object(a.jsxs)("div",{className:"drum-rate-input",children:[Object(a.jsx)("select",{value:n[t].drum.drum,onChange:function(e){var t=JSON.parse(JSON.stringify(n));t[e.target.dataset.number].drum.drum=e.target.value,console.log(t),o(t)},"data-number":t,children:xe.map((function(e){return Object(a.jsx)("option",{children:e},e)}))}),Object(a.jsx)("input",{type:"range",onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].drum.sampleRate=e.target.value,o(a),console.log(a)},min:"0.1",max:"3",step:"0.01",value:n[t].drum.sampleRate})]})}n(122);function ve(e){var t=e.percussionData,n=(e.setFinalData,Object(s.useContext)(Gn).globalBeat),o=Object(s.useContext)(Gn).bpm,c=Object(s.useContext)(Gn).setBpm,i=Object(s.useContext)(Gn).timeSignature,l=Object(s.useContext)(Gn).setTimeSignature,u=Object(s.useContext)(Gn).setFullLengthChordProgression,d=Object(s.useContext)(Gn).loopData,b=Object(s.useContext)(Gn).loopObject,m=Object(s.useContext)(Gn).setLoopData,j=Object(s.useState)(null),h=Object(r.a)(j,2),p=h[0],O=h[1],f=Object(s.useState)(!1),v=Object(r.a)(f,2),x=v[0],g=v[1],y=Object(s.useState)(new Array(16)),k=Object(r.a)(y,2),C=k[0],w=k[1];Object(s.useEffect)((function(){if(n){var e=new Array(16),t="rgba(".concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",0.5)");e[n]={backgroundColor:t,boxShadow:"0px 0px 3px 3px ".concat(t),borderRadius:"8px"},w(e)}else w(new Array(16))}),[n]);Object(s.useEffect)((function(){var e=function(e){var t=JSON.parse(JSON.stringify(d)),n=e.target.dataset;t[n.number].times[n.beat]?t[n.number].times[n.beat]=0:t[n.number].times[n.beat]=1,m(t)},t=function(e){return Object(a.jsxs)("div",{className:"butt-column",children:[Object(a.jsx)(fe,{number:"one"}),Object(a.jsx)(fe,{number:"two"}),Object(a.jsx)(fe,{number:"three"}),Object(a.jsx)(fe,{number:"four"}),Object(a.jsx)(fe,{number:"five"}),Object(a.jsx)(fe,{number:"six"})]},e)};O((function(){for(var n=[],s=parseInt(i),o=0;o<4*s+1;o++)o?n.push(Object(a.jsxs)("div",{className:"butt-column",style:C[o-1],children:[Object(a.jsx)("div",{id:"drum-one-machine",className:"machine-butt","data-drum-type":d.one.drum,"data-beat":o-1,"data-number":"one",onClick:e,style:d.one.times[o-1]?{backgroundColor:"#9d8df1",display:"flex"}:{backgroundColor:"gray",display:"flex"}}),Object(a.jsx)("div",{id:"drum-two-machine",className:"machine-butt","data-drum-type":d.two.drum,"data-beat":o-1,"data-number":"two",onClick:e,style:d.two.times[o-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-three-machine",className:"machine-butt","data-drum-type":d.three.drum,"data-beat":o-1,"data-number":"three",onClick:e,style:d.three.times[o-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-four-machine",className:"machine-butt","data-drum-type":d.four.drum,"data-beat":o-1,"data-number":"four",onClick:e,style:d.four.times[o-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-five-machine",className:"machine-butt","data-drum-type":d.five.drum,"data-beat":o-1,"data-number":"five",onClick:e,style:d.five.times[o-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-six-machine",className:"machine-butt","data-drum-type":d.six.drum,"data-beat":o-1,"data-number":"six",onClick:e,style:d.six.times[o-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}})]},o)):n.push(t(o)),o%4===0&&o<4*s&&n.push(Object(a.jsx)("div",{className:"machine-divider"},Math.random()));return n}))}),[i,t,d,m,C]);Object(s.useEffect)((function(){x&&(m(b),g(!1))}),[i,x,b,m]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"drum-machine",children:p}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"18px"},children:[Object(a.jsxs)("select",{onChange:function(e){m(function(e,t){switch(e){case"drum circle":return{one:{drum:{drum:"bugara2",sampleRate:.8,volume:1},times:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1]},two:{drum:{drum:"bugara1",sampleRate:1,volume:1},times:[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],sampleRate:1,volume:1},three:{drum:{drum:"djembe1",sampleRate:1,volume:1},times:[0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0],sampleRate:1,volume:1},four:{drum:{drum:"djembe2",sampleRate:1,volume:1},times:[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],sampleRate:1,volume:1},five:{drum:{drum:"djembe3",sampleRate:1,volume:1},times:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],sampleRate:1,volume:1},six:{drum:{drum:"rebana",sampleRate:1,volume:.7},times:[0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0],sampleRate:1,volume:1}};case"rock":return{one:{drum:{drum:"kick",sampleRate:1,volume:1},times:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0]},two:{drum:{drum:"snare",sampleRate:1,volume:1},times:[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],sampleRate:1,volume:1},three:{drum:{drum:"hat",sampleRate:1,volume:1},times:[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],sampleRate:1,volume:1},four:{drum:{drum:"tom",sampleRate:1,volume:1},times:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],sampleRate:1,volume:1},five:{drum:{drum:"ride",sampleRate:1,volume:1},times:[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],sampleRate:1,volume:1},six:{drum:{drum:"tom",sampleRate:.7,volume:.7},times:[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],sampleRate:1,volume:1}};case"gamelan":return{one:{drum:{drum:"jegog",sampleRate:1,volume:1},times:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},two:{drum:{drum:"demung1",sampleRate:1,volume:1},times:[0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],sampleRate:1,volume:1},three:{drum:{drum:"demung2",sampleRate:1,volume:1},times:[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],sampleRate:1,volume:1},four:{drum:{drum:"demung3",sampleRate:1,volume:1},times:[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],sampleRate:1,volume:1},five:{drum:{drum:"kantilan",sampleRate:1,volume:1},times:[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],sampleRate:1,volume:1},six:{drum:{drum:"kempur",sampleRate:1,volume:.8},times:[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],sampleRate:1,volume:1}};case"junk":return{one:{drum:{drum:"ruler",sampleRate:1.8,volume:1},times:[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0]},two:{drum:{drum:"ruler",sampleRate:2.5,volume:1},times:[0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0],sampleRate:1,volume:1},three:{drum:{drum:"spring",sampleRate:1.8,volume:1},times:[0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],sampleRate:1,volume:1},four:{drum:{drum:"spring",sampleRate:2.3,volume:1},times:[0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1],sampleRate:1,volume:1},five:{drum:{drum:"ceng",sampleRate:.8,volume:1},times:[0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1],sampleRate:1,volume:1},six:{drum:{drum:"bowl",sampleRate:.6,volume:.7},times:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sampleRate:1,volume:1}};default:return}}(e.target.value))},defaultValue:"dis",children:[Object(a.jsx)("option",{hidden:!0,disabled:!0,value:"dis",children:"\ud83e\udd41presets\ud83e\udd41"}),Object(a.jsx)("option",{value:"drum circle",children:"Drum Circle"}),Object(a.jsx)("option",{value:"rock",children:"Rock"}),Object(a.jsx)("option",{value:"gamelan",children:"Gamelan"}),Object(a.jsx)("option",{value:"junk",children:"Junk"})]}),Object(a.jsx)("button",{onClick:function(){m(b)},children:"Clear"}),Object(a.jsxs)("select",{name:"time-sig-select",onChange:function(e){l(e.target.value),u([]),g(!0)},defaultValue:i,children:[Object(a.jsx)("option",{value:"3",children:"3/4"}),Object(a.jsx)("option",{value:"4",children:"4/4"}),Object(a.jsx)("option",{value:"5",children:"5/4"}),Object(a.jsx)("option",{value:"7",children:"7/4"})]}),Object(a.jsxs)("label",{style:{display:"flex"},children:["BPM:",Object(a.jsx)("input",{className:"ts-fader",type:"range",min:"50",max:"200",step:"1",name:"bpm-range",onChange:function(e){c(e.target.value)},defaultValue:o})]})]})]})}var xe=["snare","kick","hat","tom","ride","bowl","bugara1","bugara2","ceng","demung1","demung2","demung3","djembe1","djembe2","djembe3","jegog","kantilan","kempur","rebana","ruler","spring"];function ge(e){var t=e.setFinalData,n=Object(s.useContext)(Gn).percussionData,o=Object(s.useContext)(Gn).setMyInstrument,c=Object(s.useState)(!1),i=Object(r.a)(c,2),l=i[0],u=i[1];Object(s.useEffect)((function(){return o("percussion"),function(){o(null)}}),[o]);return Object(a.jsxs)("div",{className:"percussion-container",children:[Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)("button",{className:"rhythm-machine-btn",onClick:function(){u(!l)},children:l?"Hide rhythm machine":"Rhythm Machine"})}),l&&Object(a.jsx)(ve,{percussionData:n,setFinalData:t}),!l&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"percussion-row",children:[Object(a.jsx)(Oe,{number:"one",defaultDrum:n.one.drum,setFinalData:t,sampleRate:n.one.sampleRate}),Object(a.jsx)(Oe,{number:"two",defaultDrum:n.two.drum,setFinalData:t,sampleRate:n.two.sampleRate}),Object(a.jsx)(Oe,{number:"three",defaultDrum:n.three.drum,setFinalData:t,sampleRate:n.three.sampleRate})]}),Object(a.jsxs)("div",{className:"percussion-row",children:[Object(a.jsx)(Oe,{number:"four",defaultDrum:n.four.drum,setFinalData:t,sampleRate:n.four.sampleRate}),Object(a.jsx)(Oe,{number:"five",defaultDrum:n.five.drum,setFinalData:t,sampleRate:n.five.sampleRate}),Object(a.jsx)(Oe,{number:"six",defaultDrum:n.six.drum,setFinalData:t,sampleRate:n.six.sampleRate})]})]})]})}Object.freeze(xe);var ye=[];function ke(e){var t=e.instrument,n=Object(s.useContext)(Gn).sessionPin,o=Object(s.useContext)(Gn).instrumentsLoaded,c=Object(s.useContext)(Gn).getGlobalEffects,i=Object(s.useContext)(Gn).setMusicData,l=Object(s.useContext)(Gn).soundSet,d=Object(s.useState)(null),b=Object(r.a)(d,2),m=b[0],j=b[1],h=Object(s.useContext)(Gn).setMyInstrument,p=Object(s.useContext)(Gn).socketId,O=Object(s.useState)(!1),f=Object(r.a)(O,2),v=f[0],x=f[1];ye.includes(t)||(E(c(),p,t,n,!1,l),ye.push(t));var g=Object(s.useCallback)((function(e){var n=JSON.parse(JSON.stringify(e));return n.socketId=p,n.instrument=t,n}),[p,t]);return Object(s.useEffect)((function(){return h(t),function(){h(null)}}),[h,t]),Object(s.useEffect)((function(){if(m){var e=g(m);i(e),j(null)}}),[m,i,g]),Object(a.jsx)("div",{children:o?Object(a.jsxs)("div",{onContextMenu:function(e){e.preventDefault()},children:[Object(a.jsx)(C,{forInstrument:t}),Object(a.jsx)(u.b,{path:"/instrument/".concat(t,"/settings"),children:Object(a.jsx)(D,{instrument:t,setSettingsOpen:x})}),Object(a.jsx)(u.b,{path:"/instrument/".concat(t,"/effects"),children:Object(a.jsx)(M,{instrument:t,setSettingsOpen:x})}),!v&&"drone"===t&&Object(a.jsx)(be,{setFinalData:j}),!v&&"keyboard"===t&&Object(a.jsx)(Z,{setFinalData:j}),!v&&"noise"===t&&Object(a.jsx)(pe,{setFinalData:j}),!v&&"percussion"===t&&Object(a.jsx)(ge,{setFinalData:j})]}):Object(a.jsx)(k,{})})}n(123);var Ce={keyboard:null,percussion:null,drone:null,noise:null},we={boxShadow:"0 0 10px 5px #9d8df1",backgroundColor:"#9d8df1",borderRadius:"50%"};function Ne(){var e=Object(s.useContext)(Gn).myInstrument,t=Object(s.useContext)(Gn).sessionPin,n=Object(s.useContext)(Gn).users,o=Object(s.useState)(Ce),c=Object(r.a)(o,2),i=c[0],d=c[1];return Object(s.useEffect)((function(){if(t&&n.users){var e=JSON.parse(JSON.stringify(Ce));n.users.forEach((function(t){t.instrument&&(e[t.instrument]=t.userName,d(e))}))}}),[n,t]),Object(a.jsx)("div",{children:t?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"instrument-links",children:[i.keyboard?Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"icon",children:["\ud83c\udfb9",Object(a.jsx)("span",{className:"username",style:"keyboard"===e?{color:"red"}:void 0,children:i.keyboard})]})}):Object(a.jsx)(l.b,{to:"/instrument/keyboard",style:e&&"keyboard"===e.instrument?we:{},children:Object(a.jsx)("div",{children:Object(a.jsx)("span",{className:"icon",children:"\ud83c\udfb9"})})}),i.percussion?Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"icon",children:["\ud83e\udd41",Object(a.jsx)("span",{className:"username",style:"percussion"===e?{color:"red"}:void 0,children:i.percussion})]})}):Object(a.jsx)(l.b,{to:"/instrument/percussion",style:e&&"percussion"===e.instrument?we:{},children:Object(a.jsx)("div",{children:Object(a.jsx)("span",{className:"icon",children:"\ud83e\udd41"})})}),i.drone?Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"icon",children:["\ud83e\udda5",Object(a.jsx)("span",{className:"username",style:"drone"===e?{color:"red"}:void 0,children:i.drone})]})}):Object(a.jsx)(l.b,{to:"/instrument/drone",style:e&&"drone"===e.instrument?we:{},children:Object(a.jsx)("div",{children:Object(a.jsx)("span",{className:"icon",children:" \ud83e\udda5"})})}),i.noise?Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"icon",style:"noise"===e?{color:"red"}:void 0,children:["\ud83d\ude49",Object(a.jsx)("span",{className:"username",children:i.noise})]})}):Object(a.jsx)(l.b,{to:"/instrument/noise",style:e&&"noise"===e.instrument?we:{},children:Object(a.jsx)("div",{children:Object(a.jsx)("span",{className:"icon",children:" \ud83d\ude49"})})})]}),Object(a.jsx)(u.b,{path:"/instrument/noise",children:Object(a.jsx)(ke,{instrument:"noise"})}),Object(a.jsx)(u.b,{path:"/instrument/drone",children:Object(a.jsx)(ke,{instrument:"drone"})}),Object(a.jsx)(u.b,{path:"/instrument/percussion",children:Object(a.jsx)(ke,{instrument:"percussion"})}),Object(a.jsx)(u.b,{path:"/instrument/keyboard",children:Object(a.jsx)(ke,{instrument:"keyboard"})}),Object(a.jsx)(u.b,{path:"/instrument/chord-progression",children:Object(a.jsx)(g,{})})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"instrument-links",children:[Object(a.jsx)(l.b,{to:"/instrument/keyboard",style:e&&"keyboard"===e.instrument?we:{},children:Object(a.jsx)("span",{className:"icon",children:"\ud83c\udfb9"})}),Object(a.jsx)(l.b,{to:"/instrument/percussion",style:e&&"percussion"===e.instrument?we:{},children:Object(a.jsx)("span",{className:"icon",children:"\ud83e\udd41"})}),Object(a.jsx)(l.b,{to:"/instrument/drone",style:e&&"drone"===e.instrument?we:{},children:Object(a.jsx)("span",{className:"icon",children:"\ud83e\udda5"})}),Object(a.jsx)(l.b,{to:"/instrument/noise",style:e&&"noise"===e.instrument?we:{},children:Object(a.jsx)("span",{className:"icon",children:" \ud83d\ude49"})})]}),Object(a.jsx)(u.b,{path:"/instrument/noise",children:Object(a.jsx)(ke,{instrument:"noise"})}),Object(a.jsx)(u.b,{path:"/instrument/drone",children:Object(a.jsx)(ke,{instrument:"drone"})}),Object(a.jsx)(u.b,{path:"/instrument/percussion",children:Object(a.jsx)(ke,{instrument:"percussion"})}),Object(a.jsx)(u.b,{path:"/instrument/keyboard",children:Object(a.jsx)(ke,{instrument:"keyboard"})}),Object(a.jsx)(u.b,{path:"/instrument/chord-progression",children:Object(a.jsx)(g,{})})]})})}n(124);function Se(){var e=Object(s.useContext)(Gn),t=Object(s.useState)(""),n=Object(r.a)(t,2),o=n[0],c=n[1],i=Object(s.useState)(!1),l=Object(r.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){u||(N.emit("getPin"),d(!0))}),[u]),Object(s.useEffect)((function(){return N.on("getPin",(function(t,n){console.log(t),c(t.pin),e.setAll({userName:t.userName,socketId:t.socketId,sessionPin:t.pin}),e.setHost(!0),e.setUsers(n)})),function(){N.removeAllListeners("getPin")}}),[e]),Object(a.jsxs)("div",{children:[u&&Object(a.jsx)(Ne,{}),!u&&Object(a.jsx)("div",{children:"'Fetching pin... Please wait\u2728'"}),Object(a.jsx)("div",{className:"pin-display",children:Object(a.jsx)("div",{children:o})})]})}n(125);function Ae(e){var t=function(t){e.keyUp(t)};return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{children:[Object(a.jsx)("caption",{children:e.enteredPin}),Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"1"}),Object(a.jsx)("td",{onClick:t,children:"2"}),Object(a.jsx)("td",{onClick:t,children:"3"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"4"}),Object(a.jsx)("td",{onClick:t,children:"5"}),Object(a.jsx)("td",{onClick:t,children:"6"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"7"}),Object(a.jsx)("td",{onClick:t,children:"8"}),Object(a.jsx)("td",{onClick:t,children:"9"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"\u2190"}),Object(a.jsx)("td",{onClick:t,children:"0"}),Object(a.jsx)("td",{onClick:t,children:"OK"})]})]})]})})}function De(){var e=Object(s.useContext)(Gn),t=Object(s.useState)(""),n=Object(r.a)(t,2),o=n[0],c=n[1];Object(s.useEffect)((function(){return N.on("joinSuccess",(function(t){e.setAll({userName:t.userName,socketId:t.socketId,sessionPin:t.pin})})),N.on("joinFailure",(function(){alert("That session doesn't seem to exist. Please try again! \ud83c\udf08")})),function(){N.removeAllListeners("joinSuccess"),N.removeAllListeners("joinFailure")}}),[e]);Object(s.useEffect)((function(){var e=function(){alert("There are too many users in that room. Please create a new room \u2728\ud83c\udf08")};return N.on("tooManyMessage",e),function(){return N.removeAllListeners("tooManyMessage",e)}}));var i=function(e){var t;t=e.key?e.key:e.target.innerText,!isNaN(parseInt(t))&&o.length<5?c(o+t):"Backspace"===t||"\u2190"===t?c(o.substring(0,o.length-1)):"Enter"!==t&&"OK"!==t||(5===o.length?N.emit("joinSession",o):alert("Please enter a 5 digit pin"))};return Object(s.useEffect)((function(){return document.addEventListener("keyup",i),function(){document.removeEventListener("keyup",i)}})),Object(a.jsxs)("div",{className:"keypad-container",children:[Object(a.jsx)(Ae,{enteredPin:o,keyUp:i}),e.sessionPin&&Object(a.jsx)(u.a,{to:"/instrument"})]})}function Ee(){var e=Object(s.useContext)(Gn).dropDownOut,t=Object(s.useContext)(Gn).setDropDownOut;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"hamburger",onClick:function(){t(!e)},children:[Object(a.jsx)("div",{className:"slice"}),Object(a.jsx)("div",{className:"slice"}),Object(a.jsx)("div",{className:"slice"})]})})}function Ie(e){return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{className:"home-link",to:"/",children:"\ud83c\udfbc"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ee,{})})]})})}var Re=n(11);function Pe(e,t){if(t)if("rhythmMachine"===e.drum)switch(e.status){case"update":t.percussion.updateMachine(e);break;case"start":t.percussion.updateMachine(e),t.percussion.startMachine();break;case"stop":t.percussion.stopMachine()}else t.percussion.play(e.drum,e.sampleRate,e.number)}var Me,Le=function(e,t){e[0]!==t.drone.one.volume.value&&(t.drone.one.volume.value=e[0]),e[1]!==t.drone.two.volume.value&&(t.drone.two.volume.value=e[1]),e[2]!==t.drone.three.volume.value&&(t.drone.three.volume.value=e[2])},Fe=function(e,t){e[0]!==t.drone.one.type&&t.drone.setBuffer("one",e[0]),e[1]!==t.drone.two.type&&t.drone.setBuffer("two",e[1]),e[2]!==t.drone.three.type&&t.drone.setBuffer("three",e[2])},Ge=function(e,t){e.forEach((function(e,t,n){return n[t]=Object(Re.f)(e).toFrequency()})),We(e[0]/440,e[1]/440,e[2]/440)},Be=function(e,t){e.includes(!0)?(e[0]?t.drone.play("one"):t.drone.stop("one"),e[1]?t.drone.play("two"):t.drone.stop("two"),e[2]?t.drone.play("three"):t.drone.stop("three")):t.drone.stopAll()},We=function(e,t,n){Me.drone.one.playbackRate=e,Me.drone.two.playbackRate=t,Me.drone.three.playbackRate=n};function Je(e,t){switch(e.instrument){case"keyboard":!function(e,t){switch(e.type){case"play":var n=Math.round(100*(Object(Re.f)(e.data.note+e.data.octave).toFrequency()/440+Number.EPSILON))/100;t.keyboard.play(n,t.keyboard.getWave(t.keyboard.wave),e.second);break;case"stop":t.keyboard.stop(e.second);break;default:console.error("Error in handleKeyboard.js")}}(e,t);break;case"noise":!function(e,t){t&&(e.start?t.noise.start(e):e.stop?t.noise.stop(e.which):t.noise.play(e))}(e,t);break;case"percussion":Pe(e,t);break;case"drone":!function(e,t){t&&(Ge([e.one.pitch,e.two.pitch,e.three.pitch],t),Fe([e.one.wave,e.two.wave,e.three.wave],t),Le([parseInt(e.one.volume,10),parseInt(e.two.volume,10),parseInt(e.three.volume,10)],t),Be([e.one.playing,e.two.playing,e.three.playing],t))}(e,t);break;default:console.error("No such instrument: ".concat(e.instrument))}}function Te(e,t){Me||(Me=t),e&&e.instrument&&Je(e,t)}var Ue={attack:.04,decay:.2,sustain:.5,release:.8};var ze,Ve,Ye,He={one:{drum:"kick",volume:0,sampleRate:1},two:{drum:"snare",volume:0,sampleRate:1},three:{drum:"hat",volume:0,sampleRate:1},four:{drum:"tom",volume:0,sampleRate:1},five:{drum:"ride",volume:0,sampleRate:1},six:{drum:"bowl",volume:0,sampleRate:1}},Ze=n(1),Qe=n(2),Xe=n(4),Ke=n(3),qe=n.p+"static/media/sine.e7bb62db.mp3",_e=n.p+"static/media/sawtooth.8642aa72.mp3",$e=n.p+"static/media/square.e8d1ef33.mp3",et=n.p+"static/media/triangle.a539a92a.mp3",tt=n.p+"static/media/oboe.5a62872f.mp3",nt=n.p+"static/media/oud.15a74423.mp3",at=n.p+"static/media/harmonium.04562397.mp3",st=n.p+"static/media/kazoo.27c62008.mp3",ot=n.p+"static/media/organ.de064c96.mp3",ct=n.p+"static/media/swell.7188c69a.mp3",it=n.p+"static/media/trumpet.ac52823d.mp3",rt=n.p+"static/media/piano.7f2a6831.mp3",lt=n.p+"static/media/voice.41c838cd.mp3",ut=n.p+"static/media/tambura.6a5b6515.mp3",dt=n.p+"static/media/singing.ccb0fe50.mp3",bt=n.p+"static/media/cello.46e80ead.mp3",mt=n.p+"static/media/saw.b53c6d3a.mp3",jt=n.p+"static/media/kalimba.9d2958ec.mp3",ht=n.p+"static/media/gamelan.d3452c16.mp3",pt=n.p+"static/media/gamelan2.0c75f388.mp3",Ot=n.p+"static/media/gamelan3.4c1888be.mp3",ft=n.p+"static/media/tuned-spring.5cd45f7b.mp3",vt=n.p+"static/media/tuned-ruler.5638b114.mp3",xt={sine:qe,sawtooth:_e,square:$e,triangle:et,oboe:tt,oud:nt,harmonium:at,kazoo:st,organ:ot,swell:ct,trumpet:it,piano:rt,voice:lt,tambura:ut,singing:dt,cello:bt,saw:mt,kalimba:jt,gamelan:ht,gamelan2:pt,gamelan3:Ot,violin:n.p+"static/media/violin.0843f254.mp3",spring:ft,ruler:vt},gt=function(){return!!Ve},yt=0,kt=new Re.b,Ct=function(){function e(){Object(Ze.a)(this,e),this.gain=new Re.g(.2).connect(kt),this.delay=new Re.d(0,1).connect(this.gain),this.distortion=(new Re.c).connect(this.delay),this.setEffects({distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}}),ze||(ze=new Re.k(xt,(function(){Ve=!0})))}return Object(Qe.a)(e,[{key:"transportTime",value:function(){return"+".concat(Object(Re.m)("16n").toSeconds())}},{key:"connect",value:function(){4===(yt+=1)&&(console.log("ALL CONNECTED"),Re.l.start(Object(Re.o)()),Re.l.bpm.value=80,kt.toDestination())}},{key:"getWave",value:function(e){if(ze)return ze.get(e)}},{key:"setEffects",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"delay":t.delay.feedback.value=e.delay.feedback.level,t.delay.delayTime.value=e.delay.time.level,e.delay.on?t.delay.wet.value=e.delay.wet.level:t.delay.wet.value=0;break;case"distortion":t.distortion.distortion=e.distortion.level.level,e.distortion.on?t.distortion.wet.value=e.distortion.wet.level:t.distortion.wet.value=0;break;default:return}}))}}]),e}(),wt=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(){var e;return Object(Ze.a)(this,n),(e=t.call(this)).keyboardGain=new Re.g(1).connect(e.distortion),e.filter=new Re.e({type:"lowpass",frequency:700,rolloff:-12,Q:1,gain:0}),e.envelope=new Re.a(Ue),e.envelope2=new Re.a(Ue),e.keyboardPlayer=new Re.i,e.keyboardPlayer2=new Re.i,e.keyboardPlayer.loop=!0,e.keyboardPlayer2.loop=!0,e.rampTo=0,e.playing=!1,e.playing2=!1,e.pbr=1,e.wave="sine",e.setFirstBuffer=setInterval((function(){gt()&&(e.keyboardPlayer.chain(e.envelope,e.filter,e.keyboardGain),e.keyboardPlayer2.chain(e.envelope2,e.filter,e.keyboardGain),clearInterval(e.setFirstBuffer),e.connect(),Wn(),e.keyboardPlayer.buffer=e.getWave("sine"),e.keyboardPlayer2.buffer=e.getWave("sine"),e.keyboardPlayer.start(),e.keyboardPlayer2.start())}),100),e}return Object(Qe.a)(n,[{key:"play",value:function(e,t,n){n?(this.playing2=!0,this.keyboardPlayer2.buffer=t,Nt.includes(this.wave)&&this.keyboardPlayer2.restart(),this.keyboardPlayer2.playbackRate=e,this.envelope2.triggerAttack(Object(Re.o)())):(this.playing=!0,this.keyboardPlayer.buffer=t,Nt.includes(this.wave)&&this.keyboardPlayer.restart(),this.keyboardPlayer.playbackRate=e,this.envelope.triggerAttack(Object(Re.o)()))}},{key:"stop",value:function(e){e?(this.playing2=!1,this.envelope2.triggerRelease(Object(Re.o)())):(this.playing=!1,this.envelope.triggerRelease(Object(Re.o)()))}}]),n}(Ct),Nt=["piano","gamelan","gamelan2","gamelan3","kalimba","oud","trumpet","ruler","spring","swell"],St=wt,At=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(){var e;return Object(Ze.a)(this,n),(e=t.call(this)).droneGain=new Re.g(1),e.filter=new Re.e({type:"lowpass",frequency:700,rolloff:-12,Q:1,gain:0}),e.envelope=new Re.a(Ue),e.one=new Re.i,e.two=new Re.i,e.three=new Re.i,e.rampTo=0,e.one.loop=!0,e.two.loop=!0,e.three.loop=!0,e.setFirstBuffer=setInterval((function(){gt()&&(e.one.buffer=e.getWave("sine"),e.two.buffer=e.getWave("sine"),e.three.buffer=e.getWave("sine"),e.envelope.chain(e.filter,e.droneGain,e.distortion),e.one.connect(e.envelope),e.two.connect(e.envelope),e.three.connect(e.envelope),e.connect(),clearInterval(e.setFirstBuffer),Wn())}),100),e}return Object(Qe.a)(n,[{key:"setBuffer",value:function(e,t){var n=this[e];n.playing&&(n.stop("+".concat(this.envelope.release)),this.envelope.triggerRelease(Object(Re.o)()),n.buffer=this.getWave(t),n.start(Object(Re.o)()),this.envelope.triggerAttack(Object(Re.o)())),n.type=t}},{key:"play",value:function(e){var t=this[e];t.buffer=this.getWave(t.type),t.playing||(t.start(Object(Re.o)()),t.playing=!0,this.envelope.triggerAttack(Object(Re.o)()))}},{key:"stop",value:function(e){var t=this[e];t.playing&&(t.playing=!1,t.stop(Object(Re.o)()))}},{key:"stopAll",value:function(){var e=this;[this.one,this.two,this.three].forEach((function(t){t.playing&&(t.playing=!1,t.stop("+".concat(e.envelope.release)),e.envelope.triggerRelease(Object(Re.o)()))}))}}]),n}(Ct),Dt=n.p+"static/media/snare.af827f95.mp3",Et=n.p+"static/media/kick.eda0cd7d.mp3",It=n.p+"static/media/ride.e7d62cef.mp3",Rt=n.p+"static/media/hat.f19fe675.mp3",Pt=n.p+"static/media/tom.8b0eff21.mp3",Mt=n.p+"static/media/bowl.9573baa5.mp3",Lt=n.p+"static/media/bugara1.ec45a24a.mp3",Ft=n.p+"static/media/bugara2.1c293c67.mp3",Gt=n.p+"static/media/ceng.4653eee0.mp3",Bt=n.p+"static/media/demung1.251de471.mp3",Wt=n.p+"static/media/demung2.abadb721.mp3",Jt=n.p+"static/media/demung3.c721fa5b.mp3",Tt=n.p+"static/media/djembe1.c8e91ba9.mp3",Ut=n.p+"static/media/djembe2.af36e9b0.mp3",zt=n.p+"static/media/djembe3.923e19df.mp3",Vt=n.p+"static/media/jegog.0b5a8ae3.mp3",Yt=n.p+"static/media/kantilan.ae46f822.mp3",Ht=n.p+"static/media/kempur.f0f14d45.mp3",Zt=n.p+"static/media/rebana.14364c0f.mp3",Qt=n.p+"static/media/ruler.aef63be4.mp3",Xt=n.p+"static/media/spring.9d884628.mp3",Kt=function(e){"number"===typeof e||0===e?Ye&&Ye(e):Ye=e},qt=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(){var e;return Object(Ze.a)(this,n),(e=t.call(this)).loaded=!1,e.one=new Re.i,e.two=new Re.i,e.three=new Re.i,e.four=new Re.i,e.five=new Re.i,e.six=new Re.i,e.oneSingle=new Re.i,e.twoSingle=new Re.i,e.threeSingle=new Re.i,e.fourSingle=new Re.i,e.fiveSingle=new Re.i,e.sixSingle=new Re.i,e.loop=new Re.h((function(e){}),"16n"),e.beat=0,e.samples=new Re.k(_t,(function(){Wn(),e.loaded=!0,e.one.connect(e.distortion),e.two.connect(e.distortion),e.three.connect(e.distortion),e.four.connect(e.distortion),e.five.connect(e.distortion),e.six.connect(e.distortion),e.oneSingle.connect(e.distortion),e.twoSingle.connect(e.distortion),e.threeSingle.connect(e.distortion),e.fourSingle.connect(e.distortion),e.fiveSingle.connect(e.distortion),e.sixSingle.connect(e.distortion),e.connect(),e.loop.start(Object(Re.j)("16n"))})),Kt(e.beat),e.drumsNums=["one","two","three","four","five","six"],e}return Object(Qe.a)(n,[{key:"startMachine",value:function(){this.loop.start(Object(Re.j)("16n"))}},{key:"stopMachine",value:function(){this.beat=0,Kt(this.beat),this.loop.stop(0)}},{key:"updateMachine",value:function(e){var t=this;console.log("HOI UPDATING MACHINE"),this.loaded&&(this.updateBpmAndTimeSignature(e),this.playbackRateHasChanged(e)&&this.drumsNums.forEach((function(n){t[n].playbackRate=e.loop[n].drum.sampleRate})));this.loop.callback=function(n){t.beat>=4*Re.l.timeSignature&&(t.beat=0,Kt(t.beat)),t.drumsNums.forEach((function(a){e.loop[a].times[t.beat]&&(t[a].playbackRate=e.loop[a].drum.sampleRate,t[a].buffer=t.samples.get(e.loop[a].drum.drum),t[a].start(n))})),t.beat+=1,Kt(t.beat)}}},{key:"play",value:function(e,t,n){this.loaded&&(this["".concat(n,"Single")].buffer=this.samples.get(e),this["".concat(n,"Single")].playbackRate=t,this["".concat(n,"Single")].start())}},{key:"playbackRateHasChanged",value:function(e){for(var t=0;t<this.drumsNums.length;t++)if(this[this.drumsNums[t]].playbackRate!==e.loop[this.drumsNums[t]].drum.sampleRate)return!0;return!1}},{key:"updateBpmAndTimeSignature",value:function(e){Re.l.bpm.value!==parseInt(e.bpm,10)&&(Re.l.bpm.value=parseInt(e.bpm,10)),Re.l.timeSignature!==parseInt(e.timeSignature,10)&&(Re.l.timeSignature=parseInt(e.timeSignature,10))}}]),n}(Ct),_t={snare:Dt,kick:Et,ride:It,hat:Rt,tom:Pt,bowl:Mt,bugara1:Lt,bugara2:Ft,ceng:Gt,demung1:Bt,demung2:Wt,demung3:Jt,djembe1:Tt,djembe2:Ut,djembe3:zt,jegog:Vt,kantilan:Yt,kempur:Ht,rebana:Zt,ruler:Qt,spring:Xt},$t=qt,en=n.p+"static/media/amradionoise.27361837.mp3",tn=n.p+"static/media/analoguewhitenoise.c3b9cf21.mp3",nn=n.p+"static/media/digitalnoise.3be42450.mp3",an=n.p+"static/media/feedback.2d6794ba.mp3",sn=n.p+"static/media/guitarfeedback.85a16f4a.mp3",on=n.p+"static/media/guitarnoise1.c8696756.mp3",cn=n.p+"static/media/guitarnoise2.4568c6af.mp3",rn=n.p+"static/media/guitarnoise3.acf451d7.mp3",ln=n.p+"static/media/guitarnoise4.e744d313.mp3",un=n.p+"static/media/heavystatic.51911ee8.mp3",dn=n.p+"static/media/micfeedback.8c3d678d.mp3",bn=n.p+"static/media/radioBuzz.9070eb0d.mp3",mn=n.p+"static/media/recordPlayerGlitch.4ff862d2.mp3",jn=n.p+"static/media/saxSqueek.5fe25053.mp3",hn=n.p+"static/media/trumpethiss.9bad6c5a.mp3",pn=n.p+"static/media/saxSkronk.7fa1a37f.mp3",On=n.p+"static/media/saxSkronk2.57b804e5.mp3",fn=n.p+"static/media/saxSkronk3.589b343f.mp3",vn=n.p+"static/media/saxSkronk4.502fd984.mp3",xn=n.p+"static/media/saxSkronk5.0ab0c2c2.mp3",gn=n.p+"static/media/saxSkronk6.2a2de3de.mp3",yn=n.p+"static/media/saxSkronk7.72cd0311.mp3",kn=n.p+"static/media/saxSkronk8.3fc6d8e3.mp3",Cn=n.p+"static/media/saxSkronk9.12c7e2d0.mp3",wn=n.p+"static/media/saxSkronk10.dfbd67a7.mp3",Nn=n.p+"static/media/saxSkronk11.f8e9bed7.mp3",Sn=n.p+"static/media/saxSkronk12.39c52f7d.mp3",An=n.p+"static/media/saxSkronk13.f3bb511f.mp3",Dn=n.p+"static/media/saxSkronk14.bece53e7.mp3",En=n.p+"static/media/aluminium.351bcc91.mp3",In=n.p+"static/media/spaceDrone.4d218f10.mp3",Rn=n.p+"static/media/glitch.a68389f0.mp3";function Pn(e){switch(e){case"Ambient Noise":return"ambientNoise";case"Skronk":return"skronk";case"Feedback":return"feedback";case"Oscillators":return"oscillators"}}var Mn=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(){var e;return Object(Ze.a)(this,n),(e=t.call(this)).loaded=!1,e.oscillatorGain=new Re.g(.3),e.player=new Re.i,e.playerFeedback=new Re.i,e.ambientNoisePlayer=new Re.i,e.feedbackPlayer=new Re.i,e.skronkPlayer=new Re.i,e.oscDist=new Re.c(3),e.oscillator=new Re.i,e.oscillator2=new Re.i,e.oscillator3=new Re.i,e.oscillator4=new Re.i,e.samples=new Re.k(Ln,(function(){console.log("noise samples loaded!"),Wn(),e.loaded=!0,e.player.connect(e.distortion),e.ambientNoisePlayer.connect(e.distortion),e.feedbackPlayer.connect(e.distortion),e.skronkPlayer.connect(e.distortion),e.oscillator.connect(e.oscDist),e.oscillator2.connect(e.oscDist),e.oscillator3.connect(e.oscDist),e.oscillator4.connect(e.oscDist),e.oscDist.connect(e.distortion),e.connect()})),e.nowPlaying=null,e.types={ambientNoise:["aluminium","amRadioNoise","analogueWhiteNoise","digitalNoise","heavyStatic","radioBuzz","recordPlayerGlitch","spaceDrone","trumpetHiss","glitch"],feedback:["feedback","guitarFeedback","guitarNoise1","guitarNoise2","guitarNoise3","guitarNoise4","micFeedback"],skronk:["saxSqueek","saxSkronk","saxSkronk2","saxSkronk3","saxSkronk4","saxSkronk5","saxSkronk6","saxSkronk7"],oscillators:["oscillators"]},e.initialize(),e}return Object(Qe.a)(n,[{key:"randomWaveType",value:function(){var e=["sine","square","triangle","sawtooth"];return e[Math.floor(Math.random()*e.length)]}},{key:"getRandomSound",value:function(){}},{key:"initialize",value:function(){var e=this;Object.keys(this).forEach((function(t){e[t]instanceof Re.i&&(e[t].loop=!0)}))}},{key:"setPlaybackRate",value:function(e){this["".concat(Pn(e.which),"Player")]&&(e.x<e.width/2?this["".concat(Pn(e.which),"Player")].playbackRate=1/(e.width/(2*e.x)):this["".concat(Pn(e.which),"Player")].playbackRate=Math.pow(1/(e.width/(2*e.x)),2.5))}},{key:"start",value:function(e){this.loaded&&this.startLogic(e)}},{key:"startLogic",value:function(e){this.oscillator.buffer=this.getWave(this.randomWaveType()),this.oscillator2.buffer=this.getWave(this.randomWaveType()),this.oscillator3.buffer=this.getWave(this.randomWaveType()),this.oscillator4.buffer=this.getWave(this.randomWaveType());var t=Pn(e.which),n=Math.floor(Math.random()*this.types[t].length);this.nowPlaying=this.types[t][n],Object.keys(Ln).includes(this.nowPlaying)?(this["".concat(t,"Player")].buffer=this.samples.get(this.nowPlaying),this.setPlaybackRate(e),this["".concat(t,"Player")].start(0,Math.floor(10*Math.random()))):(this.oscillator.start(Object(Re.o)()),this.oscillator2.start(Object(Re.o)()),this.oscillator3.start(Object(Re.o)()),this.oscillator4.start(Object(Re.o)()))}},{key:"stopOscillators",value:function(){this.oscillator.stop(Object(Re.o)()),this.oscillator2.stop(Object(Re.o)()),this.oscillator3.stop(Object(Re.o)()),this.oscillator4.stop(Object(Re.o)())}},{key:"stop",value:function(e){this["".concat(Pn(e),"Player")]&&this["".concat(Pn(e),"Player")].stop(Object(Re.o)()),"Oscillators"===e&&this.stopOscillators()}},{key:"play",value:function(e){e.x<=.001&&(e.x=.00101),e.y<=.001&&(e.y=.00101),Object.keys(Ln).includes(this.nowPlaying)?this.setPlaybackRate(e):(e.x<e.width/2?(this.oscillator.playbackRate=e.x/5e3,this.oscillator4.playbackRate=.001*e.y):(this.oscillator.playbackRate=e.x+3*e.x,this.oscillator4.playbackRate=Math.random()+e.x),this.oscillator2.playbackRate=e.y+.1*Math.random(),this.oscillator3.playbackRate=e.y/8/(e.x/2))}}]),n}(Ct),Ln={amRadioNoise:en,analogueWhiteNoise:tn,digitalNoise:nn,feedback:an,guitarFeedback:sn,guitarNoise1:on,guitarNoise2:cn,guitarNoise3:rn,guitarNoise4:ln,heavyStatic:un,micFeedback:dn,radioBuzz:bn,recordPlayerGlitch:mn,saxSqueek:jn,trumpetHiss:hn,saxSkronk:pn,saxSkronk2:On,saxSkronk3:fn,saxSkronk4:vn,saxSkronk5:xn,saxSkronk6:gn,saxSkronk7:yn,saxSkronk8:kn,saxSkronk9:Cn,saxSkronk10:wn,saxSkronk11:Nn,saxSkronk12:Sn,saxSkronk13:An,saxSkronk14:Dn,aluminium:En,spaceDrone:In,glitch:Rn},Fn=function(){function e(){Object(Ze.a)(this,e),this.keyboard=new St,this.drone=new At,this.percussion=new $t,this.noise=new Mn}return Object(Qe.a)(e,[{key:"setEffects",value:function(e,t){var n=this;this[e]&&Object.keys(t).forEach((function(e){n[e]&&n[e].setEffects(t[e])}))}},{key:"setSettings",value:function(e,t){var n=this[e];n&&(t.envelope&&(n.envelope&&(n.envelope.attack=t.envelope.attack,n.envelope.decay=t.envelope.decay,n.envelope.sustain=t.envelope.sustain,n.envelope.release=t.envelope.release),n.envelope2&&(n.envelope2.attack=t.envelope.attack,n.envelope2.decay=t.envelope.decay,n.envelope2.sustain=t.envelope.sustain,n.envelope2.release=t.envelope.release)),this[e].gain.gain.value=t.volume,"keyboard"===e&&(this.keyboard.keyboardPlayer.stop("+".concat(this.keyboard.envelope.release)),this.keyboard.keyboardPlayer.buffer=this.keyboard.getWave(t.wave),this.keyboard.keyboardPlayer2.stop("+".concat(this.keyboard.envelope.release)),this.keyboard.keyboardPlayer2.buffer=this.keyboard.getWave(t.wave),this.keyboard.wave=t.wave,this.keyboard.keyboardPlayer.start(),this.keyboard.keyboardPlayer2.start()))}}]),e}(),Gn=Object(s.createContext)(),Bn=0,Wn=function(){return Bn+=1};var Jn=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];Object(s.useEffect)((function(){n&&console.log("all instruments loaded")}),[n]);var c=Object(s.useState)(null),i=Object(r.a)(c,2),b=i[0],m=i[1],j=Object(s.useState)(null),h=Object(r.a)(j,2),f=h[0],v=h[1],x=Object(s.useState)(!1),g=Object(r.a)(x,2),y=g[0],k=g[1],C=Object(s.useState)(null),w=Object(r.a)(C,2),A=w[0],D=w[1],I=Object(s.useState)(null),R=Object(r.a)(I,2),P=R[0],M=R[1],L=Object(s.useState)(null),F=Object(r.a)(L,2),G=F[0],B=F[1],W=Object(s.useState)(void 0),J=Object(r.a)(W,2),T=J[0],U=J[1],z=Object(s.useState)({}),V=Object(r.a)(z,2),Y=V[0],H=V[1],Z=Object(s.useState)(!1),Q=Object(r.a)(Z,2),X=Q[0],K=Q[1],q=Object(s.useState)(!1),_=Object(r.a)(q,2),$=_[0],ee=_[1],te=Object(s.useState)(!1),ne=Object(r.a)(te,2),ae=ne[0],se=ne[1],oe=Object(s.useState)(!1),ce=Object(r.a)(oe,2),ie=ce[0],re=ce[1],ue=Object(s.useState)({keyboard:{envelope:Ue,volume:.5,rampTo:0,wave:"sine"},drone:{envelope:Ue,volume:.5},theremin:{envelope:Ue,volume:.5},noise:{volume:.5},skronk:{volume:.5},percussion:{volume:.5}}),de=Object(r.a)(ue,2),be=de[0],me=de[1],je=Object(s.useState)({keyboard:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}},drone:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}},theremin:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}},noise:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}},skronk:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}},percussion:{distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1}}}),he=Object(r.a)(je,2),pe=he[0],Oe=he[1],fe=Object(s.useState)(null),ve=Object(r.a)(fe,2),xe=ve[0],ge=ve[1],ye=Object(s.useState)({one:{wave:"sine",volume:"-4",pitch:"C3",playing:!1},two:{wave:"sine",volume:"-4",pitch:"C3",playing:!1},three:{wave:"sine",volume:"-4",pitch:"C3",playing:!1}}),ke=Object(r.a)(ye,2),Ce=ke[0],we=ke[1],Ae=Object(s.useState)(4),Ee=Object(r.a)(Ae,2),Me=Ee[0],Le=Ee[1],Fe=Object(s.useState)(null),Ge=Object(r.a)(Fe,2),Be=Ge[0],We=Ge[1],Je=Object(s.useState)(!1),ze=Object(r.a)(Je,2),Ve=ze[0],Ye=ze[1],Ze=Object(s.useState)(!1),Qe=Object(r.a)(Ze,2),Xe=Qe[0],Ke=Qe[1],qe=Object(s.useState)([]),_e=Object(r.a)(qe,2),$e=_e[0],et=_e[1],tt=Object(s.useState)(!1),nt=Object(r.a)(tt,2),at=nt[0],st=nt[1],ot=Object(s.useState)([]),ct=Object(r.a)(ot,2),it=ct[0],rt=ct[1],lt=Object(s.useRef)(0),ut=Object(s.useState)(!1),dt=Object(r.a)(ut,2),bt=dt[0],mt=dt[1],jt=Object(s.useState)(He),ht=Object(r.a)(jt,2),pt=ht[0],Ot=ht[1],ft=Object(s.useState)("90"),vt=Object(r.a)(ft,2),xt=vt[0],gt=vt[1],yt=Object(s.useState)("4"),kt=Object(r.a)(yt,2),Ct=kt[0],wt=kt[1],Nt={one:{drum:pt.one,times:new Array(4*Ct)},two:{drum:pt.two,times:new Array(4*Ct)},three:{drum:pt.three,times:new Array(4*Ct)},four:{drum:pt.four,times:new Array(4*Ct)},five:{drum:pt.five,times:new Array(4*Ct)},six:{drum:pt.six,times:new Array(4*Ct)}},St=Object(s.useState)(Nt),At=Object(r.a)(St,2),Dt=At[0],Et=At[1],It=Object(s.useState)(!1),Rt=Object(r.a)(It,2),Pt=Rt[0],Mt=Rt[1],Lt=Object(s.useState)(2),Ft=Object(r.a)(Lt,2),Gt=Ft[0],Bt=Ft[1],Wt=Object(s.useState)({feedback:!1,skronk:!1,oscillators:!1,ambientNoise:!1}),Jt=Object(r.a)(Wt,2),Tt=Jt[0],Ut=Jt[1];return Object(s.useEffect)((function(){et([])}),[Ct]),Object(s.useEffect)((function(){$&&Pe({type:"percussion",drum:"rhythmMachine",loop:Dt,socketId:A,timeSignature:Ct,bpm:xt,status:"update"},b)}),[xt,Ct,A,Dt,$,b]),Object(s.useEffect)((function(){document.addEventListener("click",(function e(){var t=function(){Object(Re.p)(),m(new Fn),ee(!0),Kt((function(e){ge(e)}))};"suspended"!==Re.n.state?t():(Re.n.resume(),Re.n.on("statechange",(function(){Re.n.destination.volume.value=-3,Re.n.lookAhead=.2,t()})));var n=setInterval((function(){4===Bn&&(o(!0),clearInterval(n))}),10);document.removeEventListener("click",e,!1)}))}),[]),Object(s.useEffect)((function(){console.log("Username has been set to "+P),console.log("Socket Id was set to: "+A),console.log("Session pin was set to "+f)}),[P,A,f]),Object(s.useEffect)((function(){var e=function(e){H(e)};return N.on("newMember",e),N.on("instrumentChange",e),function(){N.removeAllListeners("instrumentChange",e),N.removeAllListeners("newMember",e)}}),[Y]),Object(s.useEffect)((function(){console.log("instrument changed to "+T),f&&N.emit("instrumentChange",T,f,P)}),[T,f,P]),Object(s.useEffect)((function(){if(!f){var e=function(e){D(e),Te({data:"userUpdate",users:[{socketId:e,instrument:T}]})};return N.emit("getSocketId"),N.on("getSocketId",e),function(){N.removeAllListeners("getSocketId",e)}}}),[T,f]),Object(s.useEffect)((function(){Te({data:"userUpdate",users:Y.users})}),[Y]),Object(s.useEffect)((function(){var e=function(e){Te(e,b)};return N.on("musicData",e),function(){N.removeAllListeners("musicData",e)}})),Object(s.useEffect)((function(){var e=function(e,t,n,a){S(e,t,n,a,!0,b);var s=JSON.parse(JSON.stringify(be));s[n]=e,me(s)};return N.on("settingsChange",e),function(){return N.removeAllListeners("settingsChange",e)}})),Object(s.useEffect)((function(){var e=function(e,t,n,a){E(e,t,n,a,!0,b),Oe(e)};return N.on("effectsChange",e),function(){return N.removeAllListeners("settingsChange",e)}})),Object(s.useEffect)((function(){f?G&&(N.emit("musicData",G,f,P),B(null)):G&&(Te(G,b),B(null))}),[G,f,P,b]),Object(s.useEffect)((function(){if(at&&it[0]){if(0===xe){var e=it.length/(4*Ct);e>1&&(lt.current+1<e?lt.current+=1:lt.current=0)}var t=lt.current*(4*Ct)+xe;it[t]&&(t===it.length?"silence"!==it[0].chord?(We(it[0].chord),Ke(!1),Ye(!1)):Ye(!0):"silence"===it[t].chord?Ye(!0):xe!==it.length&&(We(it[t].chord),Ke(!1),Ye(!1)))}}),[xe,it,at,Ct]),Object(s.useEffect)((function(){if(Be&&!Xe){var e=JSON.parse(JSON.stringify(Ce)),t=le(Be,Me);e.one.pitch=t[0],e.two.pitch=t[1],e.three.pitch=t[2],we(e),Ke(!0),e.socketId=A,e.instrument="drone",B(e)}}),[Be,Ce,Me,we,Xe,Ke,mt,A]),Object(s.useEffect)((function(){if(at&&Ve){var e=JSON.parse(JSON.stringify(Ce));e.one.playing=!1,e.two.playing=!1,e.three.playing=!1,e.socketId=A,e.instrument="drone",B(e)}}),[Ve,at,Ce,Be,Me,A]),Object(a.jsx)(Gn.Provider,{value:{instrumentsLoaded:n,soundSet:b,sessionPin:f,socketId:A,userName:P,setSessionPin:v,setSocketId:D,setUserName:M,setAll:function(e){v(e.sessionPin),D(e.socketId),M(e.userName)},openedFromLanding:y,setOpenedFromLanding:k,musicData:G,setMusicData:B,myInstrument:T,setMyInstrument:U,users:Y,setUsers:H,host:X,setHost:K,globalInstrumentSettings:be,setGlobalInstrumentSettings:me,globalEffectsSettings:pe,setGlobalEffectsSettings:Oe,globalBeat:xe,droneData:Ce,setDroneData:we,droneOctave:Me,setDroneOctave:Le,chordChange:bt,setChordChange:mt,droneChord:Be,setDroneChord:We,chordUpdated:Xe,setChordUpdated:Ke,chordProgression:$e,setChordProgression:et,chordProgressionPlaying:at,setChordProgressionPlaying:st,fullLengthChordProgression:it,setFullLengthChordProgression:rt,getGlobalEffects:function(){return JSON.parse(JSON.stringify(pe))},getGlobalSettings:function(){return JSON.parse(JSON.stringify(be))},percussionData:pt,setPercussionData:Ot,drumMachinePlaying:ie,setDrumMachinePlaying:re,bpm:xt,setBpm:gt,timeSignature:Ct,setTimeSignature:wt,loopData:Dt,setLoopData:Et,loopObject:Nt,keyboardInfinity:Pt,setKeyboardInfinity:Mt,mainOctave:Gt,setMainOctave:Bt,dropDownOut:ae,setDropDownOut:se,noiseInfinity:Tt,setNoiseInfinity:Ut,audioContextStarted:$},children:Object(a.jsx)(l.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(d,{sessionPin:f,sessionId:A,userName:P}),Object(a.jsx)(Ie,{}),Object(a.jsx)(u.b,{path:"/",exact:!0,component:p}),Object(a.jsx)(u.b,{path:"/about",component:O}),Object(a.jsx)(u.b,{path:"/host",component:Se}),Object(a.jsx)(u.b,{path:"/join",component:De}),Object(a.jsx)(u.b,{path:"/instrument",component:Ne})]})})})},Tn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(Jn,{})}),document.getElementById("root")),Tn()},35:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},45:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},90:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.736469e5.chunk.js.map