(this["webpackJsonpnoise-rooms"]=this["webpackJsonpnoise-rooms"]||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(6),i=n.n(s),o=n(69),c=n.n(o),r=(n(77),n(9)),l=(n(78),n(12)),u=n(13);n(42);function d(e){var t=e.sessionPin,n=(e.sessionId,e.userName),i=Object(s.useContext)(on).dropDownOut,o=Object(s.useContext)(on).setDropDownOut,c=Object(s.useRef)();Object(s.useEffect)((function(){i&&(c.current.style.top="0px")}),[i]);return Object(a.jsx)("div",{ref:c,className:"dropdown-menu",onClick:function(){c.current.style.top="-100vh",o(!1)},children:Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:["Session pin: ",t||"Not joined"]}),Object(a.jsxs)("li",{children:["Username: ",n||"None"]})]})})}n(79);var b=n(48),m=n(39);function j(){var e=Object(s.useContext)(on).sessionPin;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"home-container",children:[Object(a.jsx)("h1",{children:"HOOTENANNY!"}),Object(a.jsxs)("div",{className:"home-button-container",children:[Object(a.jsx)(l.b,{to:"/host",className:"home-btn",children:"Host a room"}),Object(a.jsx)(l.b,{to:"/join",className:"home-btn",children:"Join a room"}),Object(a.jsx)(l.b,{to:"/instrument/keyboard",className:"home-btn",children:e?"Instrument":"Play solo"})]})]}),Object(a.jsxs)("div",{className:"home-content",children:[Object(a.jsx)("p",{children:"Hootenanny! lets you improvise music with your friends live online. Here's how it works:"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:'\u2b50\ufe0fStep 1: Click on "Host a room" to generate a pin number \ud83c\udfb0'}),Object(a.jsx)("li",{children:"\u2b50\ufe0fStep 2: Send the pin number to your friends \ud83d\udc83\ud83d\udd7a"}),Object(a.jsx)("li",{children:"\u2b50\ufe0fStep 3:Choose an instrument and start playing \u2728"})]})]}),Object(a.jsxs)("footer",{children:[Object(a.jsxs)("div",{className:"link-icons",children:[Object(a.jsx)("a",{href:"https://www.facebook.com/",children:Object(a.jsx)(b.a,{icon:m.a})}),Object(a.jsx)("a",{href:"https://github.com/HatAndBread",children:Object(a.jsx)(b.a,{icon:m.b})})]}),"Enjoy Hootenanny? Buy me a ",Object(a.jsx)("a",{href:"https://github.com/HatAndBread",children:"beer \ud83c\udf7a"})," or",Object(a.jsx)("a",{href:"https://github.com/HatAndBread",children:" give me a job."})]})]})}function p(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:"This is the about page!"})})}n(86);function h(){return Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{children:"Loading audio files..."}),Object(a.jsx)("div",{children:"Please wait \u2728"})]})}n(32);function f(e){var t=e.forInstrument,n=Object(u.f)().pathname,s="".concat(t[0].toUpperCase()).concat(t.substring(1,t.length));return Object(a.jsxs)("div",{children:[n==="/instrument/".concat(t)&&Object(a.jsx)("div",{className:"settings-link-container",children:Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/settings"),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/effects"),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]})}),n==="/instrument/".concat(t,"/settings")&&Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/effects"),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]}),n==="/instrument/".concat(t,"/effects")&&Object(a.jsxs)("div",{className:"link-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t,"/settings"),className:"settings-link",children:["\ud83c\udf9a",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Settings"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(l.b,{to:"/instrument/".concat(t),className:"settings-link",children:["\ud83c\udf9b",Object(a.jsxs)("label",{style:{fontSize:"11px"},children:[s," Effects"]})]})})]})]})}var v=n(71),O=n.n(v)()("/");function x(e,t,n,a,s,i){if(void 0===a)throw new Error("missing sessionPin");a&&!s&&O.emit("settingsChange",e,t,n,a),i&&i.setSettings(n,e)}function g(e){var t=e.instrument,n=Object(s.useContext)(on).globalInstrumentSettings[t],i=Object(s.useContext)(on).setGlobalInstrumentSettings,o=Object(s.useContext)(on).sessionPin,c=Object(s.useContext)(on).soundSet,r=Object(s.useContext)(on).globalInstrumentSettings,l=Object(s.useContext)(on).socketId,u=function(e){var n=JSON.parse(JSON.stringify(r));n[t].envelope[e.target.name]=e.target.value,i(n),x(n[t],l,t,o,!1,c)};return Object(a.jsxs)("div",{className:"envelope",children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",name:"attack",onChange:u,defaultValue:n.envelope.attack,min:"0",max:"1",step:"0.01"}),Object(a.jsx)("label",{htmlFor:"attack",children:"Attack"})]}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",name:"sustain",onChange:u,defaultValue:n.envelope.sustain,min:"0",max:"1",step:"0.01"}),Object(a.jsx)("label",{htmlFor:"sustain",children:"Sustain"})]}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",name:"decay",onChange:u,defaultValue:n.envelope.decay,min:"0",max:"1",step:"0.1"}),Object(a.jsx)("label",{htmlFor:"decay",children:"Decay"})]}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",name:"release",onChange:u,defaultValue:n.envelope.release,min:"0.01",max:"3",step:"0.01"}),Object(a.jsx)("label",{htmlFor:"release",children:"Release"})]})]})}function k(e){var t=e.instrument,n=e.setSettingsOpen,i=Object(s.useContext)(on).setGlobalInstrumentSettings,o=Object(s.useContext)(on).globalInstrumentSettings,c=Object(s.useContext)(on).sessionPin,r=Object(s.useContext)(on).socketId,l=Object(s.useContext)(on).soundSet,u=function(e){var n=JSON.parse(JSON.stringify(o));console.log(e.target.name),n[t][e.target.name]=e.target.value,i(n),x(n[t],r,t,c,!1,l)};Object(s.useEffect)((function(){return n(!0),function(){n(!1)}}),[n]);return Object(a.jsx)("div",{className:"settings-container",children:Object(a.jsxs)("div",{className:"main-settings-container",children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",id:"volume",name:"volume",min:"0",max:"1",step:"0.05",defaultValue:o[t].volume,onChange:u}),Object(a.jsx)("label",{htmlFor:"volume",children:"Volume"})]}),function(){switch(t){case"drone":return Object(a.jsx)(g,{instrument:t});case"keyboard":return Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{instrument:t}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("input",{type:"range",id:"rampTo",name:"rampTo",min:"0",max:"0.5",step:"0.01",defaultValue:o[t].rampTo,onChange:u}),Object(a.jsx)("label",{htmlFor:"rampTo",children:"Ramp"})]})]});case"noise":return;case"theremin":return Object(a.jsx)(g,{instrument:t});case"percussion":case"skronk":default:return}}()]})})}function y(e,t,n,a,s,i){if(void 0===a)throw new Error("missing sessionPin");a&&!s&&O.emit("effectsChange",e,t,n,a),i&&i.setEffects(n,e)}n(67);var w={backgroundColor:"#9d8df1",color:"snow"},S={backgroundColor:"gray",color:"snow"};function C(e){var t=e.type,n=e.params,i=e.instrument,o=Object(s.useContext)(on).sessionPin,c=Object(s.useContext)(on).getGlobalEffects,l=Object(s.useContext)(on).socketId,u=Object(s.useContext)(on).globalEffectsSettings[i],d=Object(s.useContext)(on).soundSet,b=Object(s.useContext)(on).setGlobalEffectsSettings,m=Object(s.useState)(u[t].on?w:S),j=Object(r.a)(m,2),p=j[0],h=j[1],f=function(e){var n=c();n[i][t][e.target.dataset.type].level=e.target.value,b(n),y(n,l,i,o,!1,d)};return Object(a.jsxs)("div",{className:"individual-effect",children:[Object(a.jsx)("button",{onClick:function(){var e=c();p===S?(e[i][t].on=!0,b(e),y(e,l,i,o,!1,d),h(w)):(e[i][t].on=!1,b(e),y(e,l,i,o,!1,d),h(S)),b(e)},style:p,children:t}),Object.entries(n).map((function(e){if("on"!==e[0])return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{"data-type":e[0],type:"range",defaultValue:e[1].level,min:e[1].min,max:e[1].max,step:e[1].step,onChange:f}),Object(a.jsx)("label",{children:e[0][0].toUpperCase()+e[0].substring(1,e[0].length)+""}),"shift: "===e[0]&&e[1].level]},e[0])}))]})}function N(e){var t=e.instrument,n=e.setSettingsOpen,i=Object(s.useContext)(on).globalEffectsSettings[t];return Object(s.useEffect)((function(){return n(!0),function(){n(!1)}}),[n]),Object(a.jsxs)("div",{className:"effects-container",children:[Object(a.jsx)(C,{type:"distortion",params:i.distortion,instrument:t}),Object(a.jsx)(C,{type:"delay",params:i.delay,instrument:t}),Object(a.jsx)(C,{type:"pulverizer",params:i.pulverizer,instrument:t}),Object(a.jsx)(C,{type:"vibrato",params:i.vibrato,instrument:t}),Object(a.jsx)(C,{type:"pitchShifter",params:i.pitchShifter,instrument:t})]})}n(37);var D={backgroundColor:"#9d8df1",borderColor:"#9d8df1",height:"29vh"},E={backgroundColor:"black"},P={backgroundColor:"#9d8df1",height:"98%"},R={backgroundColor:"ivory"};function I(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),i=n[0],o=n[1],c=Object(s.useState)(!1),l=Object(r.a)(c,2),u=l[0],d=l[1],b=Object(s.useContext)(J),m=Object(s.useRef)(null),j=Object(s.useRef)(),p=function(e){e.preventDefault()};return Object(s.useEffect)((function(){b.pointerDown||(o(!1),d(!1))}),[b.pointerDown]),Object(s.useEffect)((function(){b.pointerDown&&(j.current&&F(j.current.offsetHeight,j.current.offsetWidth,j.current.offsetTop,j.current.offsetLeft,b.touches.x,b.touches.y)?e.blackKey!==b.currentNote.note?(d(!0),o(!1),b.setCurrentNote({note:e.blackKey.toUpperCase(),octave:e.octave+b.mainOctave})):e.blackKey===b.currentNote.note&&d(!0):F(m.current.offsetHeight,m.current.offsetWidth,m.current.offsetTop,m.current.offsetLeft,b.touches.x,b.touches.y,e.precededByBlack)?e.octave+b.mainOctave!==b.currentNote.octave||e.note!==b.currentNote.note?(b.setCurrentNote({note:e.note.toUpperCase(),octave:e.octave+b.mainOctave}),o(!0),d(!1)):e.note===b.currentNote.note&&o(!0):(o(!1),d(!1)))}),[b,e.note,e.octave,e.blackKey,e.precededByBlack]),Object(a.jsx)("div",{className:"white-key","data-note":e.note,ref:m,onDragStart:p,style:i?P:R,children:e.blackKey&&Object(a.jsx)("div",{className:"black-key","data-note":e.blackKey,ref:j,onDragStart:p,style:u?D:E})})}var F=function(e,t,n,a,s,i,o){return s>a&&s<a+t&&i>n&&i<n+e&&!(o&&s<=a+1+t/4&&i<2+n+.6*e)};function M(e){var t=e.windowWidth,n=e.windowHeight,s=e.lastOctave,i=e.octave;return Object(a.jsxs)("div",{className:"keyboard-keys",style:t>n?{width:"".concat(t/2,"px")}:{width:"100%"},onContextMenu:function(e){e.preventDefault()},children:[Object(a.jsx)(I,{note:"C",blackKey:"C#",octave:i}),Object(a.jsx)(I,{note:"D",blackKey:"D#",octave:i,precededByBlack:1}),Object(a.jsx)(I,{note:"E",octave:i,precededByBlack:1}),Object(a.jsx)(I,{note:"F",blackKey:"F#",octave:i}),Object(a.jsx)(I,{note:"G",blackKey:"G#",octave:i,precededByBlack:1}),Object(a.jsx)(I,{note:"A",blackKey:"A#",octave:i,precededByBlack:1}),Object(a.jsx)(I,{note:"B",octave:i,precededByBlack:1}),s&&Object(a.jsx)(I,{note:"C",octave:1===i?2:3})]})}function A(e){var t=e.instrument,n=Object(s.useContext)(on).globalInstrumentSettings,i=Object(s.useContext)(on).setGlobalInstrumentSettings,o=Object(s.useContext)(on).sessionPin,c=Object(s.useContext)(on).socketId,r=Object(s.useContext)(on).soundSet;return Object(a.jsxs)("select",{onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].wave=e.target.value,i(a),x(a[t],c,t,o,!1,r)},defaultValue:n[t].wave,children:[Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"}),Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"piano",children:"piano"}),Object(a.jsx)("option",{value:"gamelan",children:"gamelan"}),Object(a.jsx)("option",{value:"gamelan2",children:"gamelan2"}),Object(a.jsx)("option",{value:"gamelan3",children:"gamelan3"}),Object(a.jsx)("option",{value:"kalimba",children:"kalimba"}),Object(a.jsx)("option",{value:"oud",children:"oud"}),Object(a.jsx)("option",{value:"trumpet",children:"trumpet"}),Object(a.jsx)("option",{value:"organ",children:"organ"}),Object(a.jsx)("option",{value:"oboe",children:"oboe"}),Object(a.jsx)("option",{value:"kazoo",children:"kazoo"}),Object(a.jsx)("option",{value:"tambura",children:"tambura"}),Object(a.jsx)("option",{value:"voice",children:"voice"}),Object(a.jsx)("option",{value:"harmonium",children:"harmonium"}),Object(a.jsx)("option",{value:"violin",children:"violin"}),Object(a.jsx)("option",{value:"cello",children:"cello"}),Object(a.jsx)("option",{value:"saw",children:"saw"}),Object(a.jsx)("option",{value:"singing",children:"singing"}),Object(a.jsx)("option",{value:"swell",children:"swell"})]})}var L={backgroundColor:"#9d8df1",borderRadius:"0px"},q={backgroundColor:"gray",borderRadius:"0px"};function z(e){for(var t=e.setPointerDown,n=e.setOctave,i=Object(s.useContext)(on).keyboardInfinity,o=Object(s.useContext)(on).setKeyboardInfinity,c=Object(s.useState)(i?L:q),l=Object(r.a)(c,2),u=l[0],d=l[1],b=Object(s.useState)([q,q,L,q,q,q]),m=Object(r.a)(b,2),j=m[0],p=m[1],h=function(e){n(parseInt(e.target.value,10));for(var t=[],a=0;a<j.length;a++)a===parseInt(e.target.value,10)?t.push(L):t.push(q);p(t)},f=function(){i?(o(!1),t(!1),d(q)):(o(!0),d(L))},v=[],O=["0","1","2","3","4","5","\u267e"],x=0;x<8;x++)x<7&&v.push(Object(a.jsx)("button",{style:x<6?j[x]:u,value:x,onClick:x<6?h:f,children:O[x]},x)),7===x&&v.push(Object(a.jsx)(A,{instrument:"keyboard"},x));return Object(a.jsx)("div",{className:"octave-setter-container",children:v.map((function(e){return e}))})}var J=Object(s.createContext)();function T(e){var t=e.setFinalData,n=Object(s.useContext)(on).keyboardInfinity,i=Object(s.useState)({width:window.innerWidth,height:window.innerHeight}),o=Object(r.a)(i,2),c=o[0],l=o[1],u=Object(s.useState)({x:null,y:null}),d=Object(r.a)(u,2),b=d[0],m=d[1],j=Object(s.useState)(!!n),p=Object(r.a)(j,2),h=p[0],f=p[1],v=Object(s.useState)({note:null,octave:1}),O=Object(r.a)(v,2),x=O[0],g=O[1],k=Object(s.useState)(2),y=Object(r.a)(k,2),w=y[0],S=y[1],C=Object(s.useState)(!1),N=Object(r.a)(C,2),D=N[0],E=N[1];return Object(s.useEffect)((function(){var e=!1;return function t(){!e&&window.requestAnimationFrame(t)}(),function(){e=!0}})),Object(s.useEffect)((function(){var e=function(e){return"touch"===e.pointerType?E(!0):E(!1)};return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[]),Object(s.useEffect)((function(){var e=function(){!n&&f(!1)},t=function(){return l({width:window.innerWidth,height:window.innerHeight})},a=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||m({x:e.x,y:e.y})},s=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||(!D&&g({note:null,octave:1}),f(!0),m({x:e.x,y:e.y}))},i=function(e){"white-key"!==e.target.className&&"black-key"!==e.target.className||e.preventDefault()};return window.addEventListener("resize",t),window.addEventListener("pointerup",e),window.addEventListener("pointerdown",s),window.addEventListener("pointermove",a),window.addEventListener("click",i),function(){window.removeEventListener("resize",t),window.removeEventListener("pointerup",e),window.removeEventListener("pointerdown",s),window.removeEventListener("pointermove",a),window.removeEventListener("click",i)}}),[n,D]),Object(s.useEffect)((function(){h?t({data:x,type:"play"}):!n&&t({data:"stop",type:"stop"})}),[t,x,h,n]),Object(a.jsxs)(J.Provider,{value:{pointerDown:h,setTouches:m,touches:b,setCurrentNote:g,currentNote:x,mainOctave:w},children:[Object(a.jsx)(z,{setPointerDown:f,setOctave:S}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(M,{windowWidth:c.width,windowHeight:c.height,lastOctave:!(c.width>c.height),octave:1}),c.width>c.height&&Object(a.jsx)(M,{windowWidth:c.width,windowHeight:c.height,lastOctave:!0,octave:2})]})]})}n(38);var B=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function W(e){var t=e.number,n=e.droneData,i=e.setDroneData,o=e.chordChange,c=e.setChordChange,l=Object(s.useState)("C3"),u=Object(r.a)(l,2),d=u[0],b=u[1],m=Object(s.useRef)();return Object(s.useEffect)((function(){m.current.value=function(e){var t;t=e.includes("#")?e.substring(0,2):e[0];var n=e[e.length-1];return B.indexOf(t)+12*n}(n[t].pitch),b(n[t].pitch),c(!1)}),[o,c,t,n]),Object(a.jsxs)("div",{className:"pitch-fader",children:[Object(a.jsx)("label",{htmlFor:"range-fader",children:"Pitch: "}),Object(a.jsx)("input",{ref:m,type:"range",name:"range-fader",onChange:function(e){var a="".concat(B[e.target.value%12]).concat(Math.floor(e.target.value/12));b(a);var s=JSON.parse(JSON.stringify(n));s[t].pitch=a,i(s)},min:"12",max:"72",defaultValue:"36"}),Object(a.jsx)("label",{className:"pitch-label",htmlFor:"range-fader",children:d})]})}function G(e){var t=e.number,n=e.droneData,s=e.setDroneData;return Object(a.jsxs)("div",{className:"volume-fader",children:[Object(a.jsx)("label",{htmlFor:"volume-fader",min:"0",max:"100",children:"Vol."}),Object(a.jsx)("input",{type:"range",name:"volume-fader",min:"-12",max:"1",step:"0.05",defaultValue:n[t].volume,onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].volume=e.target.value,s(a)}})]})}var H={backgroundColor:"red",color:"white"},V={backgroundColor:"green",color:"white"};function U(e){var t=e.number,n=e.droneData,i=e.setDroneData,o=Object(s.useState)(n[t].playing?"Stop":"Start"),c=Object(r.a)(o,2),l=c[0],u=c[1],d=Object(s.useState)(n[t].playing?H:V),b=Object(r.a)(d,2),m=b[0],j=b[1];return Object(s.useEffect)((function(){u(n[t].playing?"Stop":"Start"),n[t].playing?j(H):j(V)}),[n,t]),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(n));"Start"===l?(u("Stop"),e[t].playing=!0):(u("Start"),e[t].playing=!1),i(e)},style:m,children:l})})}function K(e){e.name;var t=e.number,n=e.droneData,s=e.setDroneData;return Object(a.jsxs)("select",{onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].wave=e.target.value,s(a)},defaultValue:n[t].wave,children:[Object(a.jsx)("option",{value:"harmonium",children:"harmonium"}),Object(a.jsx)("option",{value:"tambura",children:"tambura"}),Object(a.jsx)("option",{value:"organ",children:"organ"}),Object(a.jsx)("option",{value:"cello",children:"cello"}),Object(a.jsx)("option",{value:"kazoo",children:"kazoo"}),Object(a.jsx)("option",{value:"voice",children:"voice"}),Object(a.jsx)("option",{value:"oboe",children:"oboe"}),Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"}),Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"singing",children:"singing"}),Object(a.jsx)("option",{value:"violin",children:"violin"}),Object(a.jsx)("option",{value:"saw",children:"saw"})]})}var Y={backgroundColor:"#9d8df1",borderRadius:"0px"},X={backgroundColor:"#41463d",borderRadius:"0px"};function Q(e){var t=e.value,n=e.octave,i=e.setOctave,o=e.setChordUpdated,c=Object(s.useState)(X),l=Object(r.a)(c,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){d(n===t?Y:X)}),[n,t]),Object(a.jsxs)("button",{value:t,onClick:function(){i(t),o(!1)},style:u,children:["Octave ",t]})}var Z={padding:"0",backgroundColor:"#9d8df1",borderRadius:"0px"},$={padding:"0",backgroundColor:"#41463d",borderRadius:"0px"};function _(e){var t=e.note,n=e.chord,i=e.setChord,o=e.setPreviousChord,c=e.setChordChange,l=Object(s.useState)($),u=Object(r.a)(l,2),d=u[0],b=u[1];return Object(s.useEffect)((function(){b(n===t?Z:$)}),[n,t]),Object(a.jsx)("button",{style:d,onClick:function(){n!==t?(o(n),i(t),c(!0)):(o(null),i(null))},children:t})}function ee(e,t){var n=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e})),t.current}(t);Object(s.useEffect)((function(){JSON.stringify(n)!==JSON.stringify(t)&&e()}),[t,e,n])}var te=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ne=function(e,t){return function(e,t,n,a){return e[1]=t,e[2]=te[te.indexOf(t)+n],e[3]=te[te.indexOf(t)+7],e[2]||(e[2]=te[te.indexOf(t)-12+n]),e[3]||(e[3]=te[te.indexOf(t)-12+7]),Object.values(e).map((function(e,t,n){return n[t]=e+a}))}({1:null,2:null,3:null},e.includes("#")?e.substring(0,2):e[0],e.includes("m")?3:4,t)};function ae(e){var t=e.droneData,n=e.setDroneData,i=e.chordChange,o=e.setChordChange,c=Object(s.useState)(null),l=Object(r.a)(c,2),u=l[0],d=l[1],b=Object(s.useState)(null),m=Object(r.a)(b,2),j=m[0],p=m[1],h=Object(s.useState)(3),f=Object(r.a)(h,2),v=f[0],O=f[1],x=Object(s.useState)(!1),g=Object(r.a)(x,2),k=g[0],y=g[1];return ee((function(){var e=JSON.parse(JSON.stringify(t));e.one.pitch="".concat(e.one.pitch.slice(0,e.one.pitch.length-1)).concat(v),e.two.pitch="".concat(e.two.pitch.slice(0,e.two.pitch.length-1)).concat(v),e.three.pitch="".concat(e.three.pitch.slice(0,e.three.pitch.length-1)).concat(v),n(e)}),[v]),Object(s.useEffect)((function(){var e=function(){var e=JSON.parse(JSON.stringify(t)),a=ne(u,v);e.one.pitch=a[0],e.two.pitch=a[1],e.three.pitch=a[2],n(e),o(!0),y(!0)};(u&&!k||i)&&e()}),[u,t,v,j,n,i,k,o]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"octave-button-container",children:[Object(a.jsx)(Q,{value:1,octave:v,setOctave:O,setChordUpdated:y}),Object(a.jsx)(Q,{value:2,octave:v,setOctave:O,setChordUpdated:y}),Object(a.jsx)(Q,{value:3,octave:v,setOctave:O,setChordUpdated:y}),Object(a.jsx)(Q,{value:4,octave:v,setOctave:O,setChordUpdated:y}),Object(a.jsx)(Q,{value:5,octave:v,setOctave:O,setChordUpdated:y})]}),Object(a.jsx)("div",{className:"chord-container",children:te.map((function(e){return Object(a.jsx)(_,{note:e,chord:u,setChord:d,setPreviousChord:p,setChordChange:o},e)}))}),Object(a.jsx)("div",{className:"chord-container",children:te.map((function(e){return Object(a.jsx)(_,{note:e+"m",chord:u,setChord:d,setPreviousChord:p,setChordChange:o},e)}))})]})}function se(e){var t=e.setFinalData,n=Object(s.useContext)(on).droneData,i=Object(s.useContext)(on).setDroneData,o=Object(s.useState)(!1),c=Object(r.a)(o,2),l=c[0],u=c[1],d=Object(s.useState)(!1),b=Object(r.a)(d,2),m=b[0],j=b[1],p=Object(s.useState)("Chords"),h=Object(r.a)(p,2),f=h[0],v=h[1];Object(s.useEffect)((function(){t(n)}),[n,t]);var O=function(e){var t=JSON.parse(JSON.stringify(n));console.log(t),"start"===e.target.value?(t.one.playing=!0,t.two.playing=!0,t.three.playing=!0):(t.one.playing=!1,t.two.playing=!1,t.three.playing=!1),i(t)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"drone-top-btns",children:[Object(a.jsx)("button",{onClick:function(){l?(u(!1),v("Chords")):(u(!0),v("Hide Chords"))},children:f}),Object(a.jsx)("button",{onClick:O,value:"start",children:"Start All \u25b6\ufe0f"}),Object(a.jsx)("button",{onClick:O,value:"stop",children:"Stop All \u23f9"})]}),l&&Object(a.jsx)(ae,{droneData:n,setDroneData:i,chordChange:m,setChordChange:j}),Object(a.jsxs)("div",{className:"drones-container",children:[Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(W,{min:"1",max:"60",defaultValue:"24",number:"one",droneData:n,setDroneData:i,chordChange:m,setChordChange:j}),Object(a.jsx)(G,{number:"one",droneData:n,setDroneData:i}),Object(a.jsx)(U,{number:"one",droneData:n,setDroneData:i}),Object(a.jsx)(K,{name:"drone1",number:"one",droneData:n,setDroneData:i})]}),Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(W,{min:"1",max:"60",defaultValue:"24",number:"two",droneData:n,setDroneData:i,chordChange:m,setChordChange:j}),Object(a.jsx)(G,{number:"two",droneData:n,setDroneData:i}),Object(a.jsx)(U,{number:"two",droneData:n,setDroneData:i}),Object(a.jsx)(K,{name:"drone2",number:"two",droneData:n,setDroneData:i})]}),Object(a.jsxs)("div",{className:"single-drone-container",children:[Object(a.jsx)(W,{min:"1",max:"60",defaultValue:"24",number:"three",droneData:n,setDroneData:i,chordChange:m,setChordChange:j}),Object(a.jsx)(G,{number:"three",droneData:n,setDroneData:i}),Object(a.jsx)(U,{number:"three",droneData:n,setDroneData:i}),Object(a.jsx)(K,{name:"drone3",number:"three",droneData:n,setDroneData:i})]})]})]})}n(68);function ie(e){var t=e.name,n=e.setWidth,i=e.color,o=Object(s.useRef)();return Object(s.useEffect)((function(){n&&n(o.current.offsetWidth)})),Object(s.useEffect)((function(){if(n){var e=function(){n(o.current.offsetWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}})),Object(a.jsx)("div",{className:"noise-area-container","data-name":t,ref:o,style:i,children:Object(a.jsx)("div",{className:"noise-label",style:{pointerEvents:"none"},children:t})})}function oe(e){var t=e.setFinalData,n=Object(s.useState)(null),i=Object(r.a)(n,2),o=i[0],c=i[1],l=Object(s.useState)({backgroundColor:"gray"}),u=Object(r.a)(l,2),d=u[0],b=u[1],m=Object(s.useState)({backgroundColor:"gray"}),j=Object(r.a)(m,2),p=j[0],h=j[1],f=Object(s.useState)({backgroundColor:"gray"}),v=Object(r.a)(f,2),O=v[0],x=v[1],g=Object(s.useState)({backgroundColor:"gray"}),k=Object(r.a)(g,2),y=k[0],w=k[1];return Object(s.useEffect)((function(){var e=function(){return"rgb(".concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),")")},n=function(t){b("Feedback"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),h("Skronk"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),x("Oscillators"===t?{backgroundColor:e()}:{backgroundColor:"gray"}),w("Ambient Noise"===t?{backgroundColor:e()}:{backgroundColor:"gray"})},a=function(e){e.target.dataset&&e.target.dataset.name&&(t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,start:!0,width:o}),n(e.target.dataset.name))},s=function(e){t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,width:o}),n(e.target.dataset.name)},i=function(e){t({which:e.target.dataset.name,x:e.offsetX,y:e.offsetY,stop:!0}),n()};return document.addEventListener("pointerdown",a),document.addEventListener("pointermove",s),document.addEventListener("pointerup",i),function(){document.removeEventListener("pointerdown",a),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i)}})),Object(a.jsxs)("div",{className:"noise-container",children:[Object(a.jsxs)("div",{className:"noise-row",children:[Object(a.jsx)(ie,{name:"Feedback",setWidth:c,color:d}),Object(a.jsx)(ie,{name:"Skronk",color:p})]}),Object(a.jsxs)("div",{className:"noise-row",children:[Object(a.jsx)(ie,{name:"Oscillators",color:O}),Object(a.jsx)(ie,{name:"Ambient Noise",color:y})]})]})}n(117);function ce(e){var t=e.defaultDrum,n=e.number,i=e.setFinalData,o=e.sampleRate,c=Object(s.useState)(t),l=Object(r.a)(c,2),u=l[0],d=l[1],b=Object(s.useContext)(on).percussionData,m=Object(s.useContext)(on).setPercussionData,j=Object(s.useContext)(on).socketId,p=function(){return JSON.parse(JSON.stringify(b))};return Object(a.jsxs)("div",{className:"individual-percussion-container",children:[Object(a.jsx)("select",{onChange:function(e){var t=p();t[n].drum=e.target.value,m(t),d(e.target.value)},defaultValue:t,children:Ke.map((function(e){return Object(a.jsx)("option",{children:e},e)}))}),Object(a.jsx)("input",{type:"range",onChange:function(e){var t=p();t[n].sampleRate=e.target.value,m(t)},min:"0.1",max:"3",step:"0.01",defaultValue:o}),Object(a.jsx)("div",{className:"hit-pad",onClick:function(){i({type:"percussion",drum:u,volume:b[n].volume,sampleRate:b[n].sampleRate,number:n,socketId:j})}})]})}function re(e){var t=e.number,n=Object(s.useContext)(on).loopData,i=Object(s.useContext)(on).setLoopData;return Object(a.jsxs)("div",{className:"drum-rate-input",children:[Object(a.jsx)("select",{defaultValue:n[t].drum.drum,onChange:function(e){var t=JSON.parse(JSON.stringify(n));t[e.target.dataset.number].drum.drum=e.target.value,console.log(t),i(t)},"data-number":t,children:Ke.map((function(e){return Object(a.jsx)("option",{children:e},e)}))}),Object(a.jsx)("input",{type:"range",onChange:function(e){var a=JSON.parse(JSON.stringify(n));a[t].drum.sampleRate=e.target.value,i(a),console.log(a)},min:"0.1",max:"3",step:"0.01",defaultValue:n[t].drum.sampleRate})]})}n(118);var le=n(1),ue=n(2),de=n(4),be=n(3),me=n(10);var je,pe,he={sine:n.p+"static/media/sine.e7bb62db.mp3",sawtooth:n.p+"static/media/sawtooth.8642aa72.mp3",square:n.p+"static/media/square.e8d1ef33.mp3",triangle:n.p+"static/media/triangle.a539a92a.mp3",oboe:n.p+"static/media/oboe.5a62872f.mp3",oud:n.p+"static/media/oud.15a74423.mp3",harmonium:n.p+"static/media/harmonium.04562397.mp3",kazoo:n.p+"static/media/kazoo.27c62008.mp3",organ:n.p+"static/media/organ.de064c96.mp3",swell:n.p+"static/media/swell.7188c69a.mp3",trumpet:n.p+"static/media/trumpet.ac52823d.mp3",piano:n.p+"static/media/piano.7f2a6831.mp3",voice:n.p+"static/media/voice.41c838cd.mp3",tambura:n.p+"static/media/tambura.6a5b6515.mp3",singing:n.p+"static/media/singing.ccb0fe50.mp3",cello:n.p+"static/media/cello.46e80ead.mp3",saw:n.p+"static/media/saw.b53c6d3a.mp3",kalimba:n.p+"static/media/kalimba.9d2958ec.mp3",gamelan:n.p+"static/media/gamelan.d3452c16.mp3",gamelan2:n.p+"static/media/gamelan2.0c75f388.mp3",gamelan3:n.p+"static/media/gamelan3.4c1888be.mp3",violin:n.p+"static/media/violin.0843f254.mp3"},fe=function(){return!!je},ve=0,Oe=new me.c,xe=function(){function e(){Object(le.a)(this,e),this.gain=new me.h(.2).connect(Oe),this.delay=new me.e(0,1).connect(this.gain),this.pulverizer=new me.b(1).connect(this.delay),this.distortion=new me.d(0).connect(this.pulverizer),this.pitchShifter=new me.j(0).connect(this.distortion),this.vibrato=new me.o(3,1).connect(this.pitchShifter),this.setEffects({vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}}),je||(je=new me.m(he,(function(){})))}return Object(ue.a)(e,[{key:"connect",value:function(){4===(ve+=1)&&(console.log("ALL CONNECTED"),me.n.start(me.q()),me.n.bpm.value=80,Oe.toDestination())}},{key:"getWave",value:function(e){if(je)return je.get(e)}},{key:"setEffects",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(e[n].wet?e[n].on?t[n].wet.value=e[n].wet.level:t[n].wet.value=0:e[n].on?t[n].wet.value=1:t[n].wet.value=0,n){case"pulverizer":t.pulverizer.bits.setValueAtTime(e.pulverizer.level.level,me.q());break;case"delay":t.delay.feedback.value=e.delay.feedback.level,t.delay.delayTime.value=e.delay.time.level;break;case"distortion":t.distortion.distortion=e.distortion.level.level;break;case"pitchShifter":t.pitchShifter.pitch=e.pitchShifter.shift.level;break;case"vibrato":t.vibrato.depth.value=e.vibrato.depth.level,t.vibrato.frequency.value=e.vibrato.freq.level;break;default:return}}))}}]),e}(),ge=n.p+"static/media/snare.af827f95.mp3",ke=n.p+"static/media/kick.eda0cd7d.mp3",ye=n.p+"static/media/ride.e7d62cef.mp3",we=n.p+"static/media/hat.f19fe675.mp3",Se=n.p+"static/media/tom.8b0eff21.mp3",Ce=n.p+"static/media/bowl.9573baa5.mp3",Ne=n.p+"static/media/bugara1.ec45a24a.mp3",De=n.p+"static/media/bugara2.1c293c67.mp3",Ee=n.p+"static/media/ceng.4653eee0.mp3",Pe=n.p+"static/media/demung1.251de471.mp3",Re=n.p+"static/media/demung2.abadb721.mp3",Ie=n.p+"static/media/demung3.c721fa5b.mp3",Fe=n.p+"static/media/djembe1.c8e91ba9.mp3",Me=n.p+"static/media/djembe2.af36e9b0.mp3",Ae=n.p+"static/media/djembe3.923e19df.mp3",Le=n.p+"static/media/jegog.0b5a8ae3.mp3",qe=n.p+"static/media/kantilan.ae46f822.mp3",ze=n.p+"static/media/kempur.f0f14d45.mp3",Je=n.p+"static/media/rebana.14364c0f.mp3",Te=n.p+"static/media/ruler.aef63be4.mp3",Be=n.p+"static/media/spring.9d884628.mp3",We=function(e){return"number"===typeof e||0===e?pe&&pe(e):pe=e},Ge=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){var e;return Object(le.a)(this,n),(e=t.call(this)).loaded=!1,e.one=new me.k,e.two=new me.k,e.three=new me.k,e.four=new me.k,e.five=new me.k,e.six=new me.k,e.samples=new me.m(He,(function(){rn(),e.loaded=!0,e.one.connect(e.vibrato),e.two.connect(e.vibrato),e.three.connect(e.vibrato),e.four.connect(e.vibrato),e.five.connect(e.vibrato),e.six.connect(e.vibrato),e.connect()})),e.loop=new me.i((function(e){}),"16n"),e.beat=0,We(e.beat),e.drumsNums=["one","two","three","four","five","six"],e}return Object(ue.a)(n,[{key:"startMachine",value:function(){this.loop.start(me.l("16n"))}},{key:"stopMachine",value:function(){this.beat=0,We(this.beat),this.loop.stop(0)}},{key:"updateMachine",value:function(e){var t=this;this.loaded&&(this.updateBpmAndTimeSignature(e),this.playbackRateHasChanged(e)&&this.drumsNums.forEach((function(n){t[n].playbackRate=e.loop[n].drum.sampleRate})));this.loop.callback=function(n){t.beat>=4*me.n.timeSignature&&(t.beat=0,We(t.beat)),t.drumsNums.forEach((function(a){e.loop[a].times[t.beat]&&(t[a].playbackRate=e.loop[a].drum.sampleRate,t[a].buffer=t.samples.get(e.loop[a].drum.drum),t[a].start(n))})),t.beat+=1,We(t.beat)}}},{key:"play",value:function(e,t,n){this.loaded&&(this[n].buffer=this.samples.get(e),this[n].playbackRate=t,this[n].start())}},{key:"playbackRateHasChanged",value:function(e){for(var t=0;t<this.drumsNums.length;t++)if(this[this.drumsNums[t]].playbackRate!==e.loop[this.drumsNums[t]].drum.sampleRate)return!0;return!1}},{key:"updateBpmAndTimeSignature",value:function(e){me.n.bpm.value!==parseInt(e.bpm,10)&&(me.n.bpm.value=parseInt(e.bpm,10)),me.n.timeSignature!==parseInt(e.timeSignature,10)&&(me.n.timeSignature=parseInt(e.timeSignature,10))}}]),n}(xe),He={snare:ge,kick:ke,ride:ye,hat:we,tom:Se,bowl:Ce,bugara1:Ne,bugara2:De,ceng:Ee,demung1:Pe,demung2:Re,demung3:Ie,djembe1:Fe,djembe2:Me,djembe3:Ae,jegog:Le,kantilan:qe,kempur:ze,rebana:Je,ruler:Te,spring:Be},Ve=Ge;function Ue(e){var t=e.percussionData,n=e.setFinalData,i=Object(s.useState)(null),o=Object(r.a)(i,2),c=o[0],l=o[1],u=Object(s.useContext)(on).bpm,d=Object(s.useContext)(on).setBpm,b=Object(s.useContext)(on).socketId,m=Object(s.useContext)(on).timeSignature,j=Object(s.useContext)(on).setTimeSignature,p=Object(s.useContext)(on).drumMachinePlaying,h=Object(s.useContext)(on).setDrumMachinePlaying,f=Object(s.useContext)(on).loopData,v=Object(s.useContext)(on).loopObject,O=Object(s.useContext)(on).setLoopData,x=Object(s.useState)(null),g=Object(r.a)(x,2),k=g[0],y=g[1],w=Object(s.useState)(!1),S=Object(r.a)(w,2),C=S[0],N=S[1],D=Object(s.useState)(new Array(16)),E=Object(r.a)(D,2),P=E[0],R=E[1],I=function(e){l(e)};Object(s.useState)((function(){We(I)}),[]);Object(s.useEffect)((function(){if(c){var e=new Array(16),t="rgba(".concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",0.5)");console.log(c),e[c]={backgroundColor:t,boxShadow:"0px 0px 3px 3px ".concat(t),borderRadius:"8px"},R(e)}else R(new Array(16))}),[c]);Object(s.useEffect)((function(){var e=function(e){var t=JSON.parse(JSON.stringify(f)),n=e.target.dataset;t[n.number].times[n.beat]?t[n.number].times[n.beat]=0:t[n.number].times[n.beat]=1,O(t)},t=function(e){return Object(a.jsxs)("div",{className:"butt-column",children:[Object(a.jsx)(re,{number:"one"}),Object(a.jsx)(re,{number:"two"}),Object(a.jsx)(re,{number:"three"}),Object(a.jsx)(re,{number:"four"}),Object(a.jsx)(re,{number:"five"}),Object(a.jsx)(re,{number:"six"})]},e)};y((function(){for(var n=[],s=parseInt(m),i=0;i<4*s+1;i++)i?n.push(Object(a.jsxs)("div",{className:"butt-column",style:P[i-1],children:[Object(a.jsx)("div",{id:"drum-one-machine",className:"machine-butt","data-drum-type":f.one.drum,"data-beat":i-1,"data-number":"one",onClick:e,style:f.one.times[i-1]?{backgroundColor:"#9d8df1",display:"flex"}:{backgroundColor:"gray",display:"flex"}}),Object(a.jsx)("div",{id:"drum-two-machine",className:"machine-butt","data-drum-type":f.two.drum,"data-beat":i-1,"data-number":"two",onClick:e,style:f.two.times[i-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-three-machine",className:"machine-butt","data-drum-type":f.three.drum,"data-beat":i-1,"data-number":"three",onClick:e,style:f.three.times[i-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-four-machine",className:"machine-butt","data-drum-type":f.four.drum,"data-beat":i-1,"data-number":"four",onClick:e,style:f.four.times[i-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-five-machine",className:"machine-butt","data-drum-type":f.five.drum,"data-beat":i-1,"data-number":"five",onClick:e,style:f.five.times[i-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}}),Object(a.jsx)("div",{id:"drum-six-machine",className:"machine-butt","data-drum-type":f.six.drum,"data-beat":i-1,"data-number":"six",onClick:e,style:f.six.times[i-1]?{backgroundColor:"#9d8df1"}:{backgroundColor:"gray"}})]},i)):n.push(t(i)),i%4===0&&i<4*s&&n.push(Object(a.jsx)("div",{className:"machine-divider"},Math.random()));return n}))}),[m,t,f,O,P]),Object(s.useEffect)((function(){n({type:"percussion",drum:"rhythmMachine",loop:f,socketId:b,timeSignature:m,bpm:u,status:"update"})}),[f,n,b,m,u]);Object(s.useEffect)((function(){C&&(O(v),N(!1))}),[m,C,v,O]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"drum-machine",children:k}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(a.jsx)("button",{onClick:function(){O(v)},children:"Clear"}),Object(a.jsx)("button",{onClick:function(){p?(h(!1),n({type:"percussion",drum:"rhythmMachine",loop:f,socketId:b,timeSignature:m,bpm:u,status:"stop"})):(h(!0),n({type:"percussion",drum:"rhythmMachine",loop:f,socketId:b,timeSignature:m,bpm:u,status:"start"}))},style:p?{backgroundColor:"red"}:{backgroundColor:"#6249e9"},children:p?"Stop":"Start"}),Object(a.jsxs)("select",{name:"time-sig-select",onChange:function(e){j(e.target.value),console.log(m),N(!0)},defaultValue:m,children:[Object(a.jsx)("option",{value:"3",children:"3/4"}),Object(a.jsx)("option",{value:"4",children:"4/4"}),Object(a.jsx)("option",{value:"5",children:"5/4"}),Object(a.jsx)("option",{value:"7",children:"7/4"})]}),Object(a.jsxs)("label",{style:{display:"flex"},children:["BPM:",Object(a.jsx)("input",{className:"ts-fader",type:"range",min:"50",max:"200",step:"1",name:"bpm-range",onChange:function(e){d(e.target.value),console.log(u)},defaultValue:u})]})]})]})}var Ke=["snare","kick","hat","tom","ride","bowl","bugara1","bugara2","ceng","demung1","demung2","demung3","djembe1","djembe2","djembe3","jegog","kantilan","kempur","rebana","ruler","spring"];function Ye(e){var t=e.setFinalData,n=Object(s.useContext)(on).percussionData,i=Object(s.useContext)(on).setMyInstrument,o=Object(s.useState)(!1),c=Object(r.a)(o,2),l=c[0],u=c[1];Object(s.useEffect)((function(){return i("percussion"),function(){i(null)}}),[i]);return Object(a.jsxs)("div",{className:"percussion-container",children:[Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)("button",{className:"rhythm-machine-btn",onClick:function(){u(!l)},children:l?"Hide rhythm machine":"Rhythm Machine"})}),l&&Object(a.jsx)(Ue,{percussionData:n,setFinalData:t}),!l&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"percussion-row",children:[Object(a.jsx)(ce,{number:"one",defaultDrum:n.one.drum,setFinalData:t,sampleRate:n.one.sampleRate}),Object(a.jsx)(ce,{number:"two",defaultDrum:n.two.drum,setFinalData:t,sampleRate:n.two.sampleRate}),Object(a.jsx)(ce,{number:"three",defaultDrum:n.three.drum,setFinalData:t,sampleRate:n.three.sampleRate})]}),Object(a.jsxs)("div",{className:"percussion-row",children:[Object(a.jsx)(ce,{number:"four",defaultDrum:n.four.drum,setFinalData:t,sampleRate:n.four.sampleRate}),Object(a.jsx)(ce,{number:"five",defaultDrum:n.five.drum,setFinalData:t,sampleRate:n.five.sampleRate}),Object(a.jsx)(ce,{number:"six",defaultDrum:n.six.drum,setFinalData:t,sampleRate:n.six.sampleRate})]})]})]})}Object.freeze(Ke);var Xe=[];function Qe(e){var t=e.instrument,n=Object(s.useContext)(on).sessionPin,i=Object(s.useContext)(on).instrumentsLoaded,o=Object(s.useContext)(on).getGlobalEffects,c=Object(s.useContext)(on).setMusicData,l=Object(s.useContext)(on).soundSet,d=Object(s.useState)(null),b=Object(r.a)(d,2),m=b[0],j=b[1],p=Object(s.useContext)(on).setMyInstrument,v=Object(s.useContext)(on).socketId,O=Object(s.useState)(!1),x=Object(r.a)(O,2),g=x[0],w=x[1];Xe.includes(t)||(console.log("Ho! Mounting for the first time"),y(o(),v,t,n,!1,l),Xe.push(t));var S=Object(s.useCallback)((function(e){var n=JSON.parse(JSON.stringify(e));return n.socketId=v,n.instrument=t,n}),[v,t]);return Object(s.useEffect)((function(){return p({instrument:t}),function(){p(null)}}),[p,t]),Object(s.useEffect)((function(){if(m){var e=S(m);c(e),j(null)}}),[m,c,S]),Object(a.jsx)("div",{children:i?Object(a.jsxs)("div",{onContextMenu:function(e){e.preventDefault()},children:[Object(a.jsx)(f,{forInstrument:t}),Object(a.jsx)(u.b,{path:"/instrument/".concat(t,"/settings"),children:Object(a.jsx)(k,{instrument:t,setSettingsOpen:w})}),Object(a.jsx)(u.b,{path:"/instrument/".concat(t,"/effects"),children:Object(a.jsx)(N,{instrument:t,setSettingsOpen:w})}),!g&&"drone"===t&&Object(a.jsx)(se,{setFinalData:j}),!g&&"keyboard"===t&&Object(a.jsx)(T,{setFinalData:j}),!g&&"noise"===t&&Object(a.jsx)(oe,{setFinalData:j}),!g&&"percussion"===t&&Object(a.jsx)(Ye,{setFinalData:j})]}):Object(a.jsx)(h,{})})}n(128);var Ze={boxShadow:"0 0 10px 5px #9d8df1",backgroundColor:"#9d8df1",borderRadius:"50%"};function $e(){var e=Object(s.useContext)(on).myInstrument;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"instrument-links",children:[Object(a.jsx)(l.b,{to:"/instrument/keyboard",style:e&&"keyboard"===e.instrument?Ze:{},children:"\ud83c\udfb9"}),Object(a.jsx)(l.b,{to:"/instrument/percussion",style:e&&"percussion"===e.instrument?Ze:{},children:"\ud83e\udd41"}),Object(a.jsx)(l.b,{to:"/instrument/drone",style:e&&"drone"===e.instrument?Ze:{},children:"\ud83e\udda5"}),Object(a.jsx)(l.b,{to:"/instrument/noise",style:e&&"noise"===e.instrument?Ze:{},children:"\ud83d\ude49"})]}),Object(a.jsx)(u.b,{path:"/instrument/noise",children:Object(a.jsx)(Qe,{instrument:"noise"})}),Object(a.jsx)(u.b,{path:"/instrument/drone",children:Object(a.jsx)(Qe,{instrument:"drone"})}),Object(a.jsx)(u.b,{path:"/instrument/percussion",children:Object(a.jsx)(Qe,{instrument:"percussion"})}),Object(a.jsx)(u.b,{path:"/instrument/keyboard",children:Object(a.jsx)(Qe,{instrument:"keyboard"})})]})})}n(129);function _e(){var e=Object(s.useContext)(on),t=Object(s.useState)(""),n=Object(r.a)(t,2),i=n[0],o=n[1],c=Object(s.useState)(!1),l=Object(r.a)(c,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){u||(O.emit("getPin"),d(!0))}),[u]),Object(s.useEffect)((function(){return O.on("getPin",(function(t,n){console.log(t),o(t.pin),e.setAll({userName:t.userName,socketId:t.socketId,sessionPin:t.pin}),e.setHost(!0),e.setUsers(n)})),function(){O.removeAllListeners("getPin")}}),[e]),Object(a.jsxs)("div",{children:[u&&Object(a.jsx)($e,{}),!u&&Object(a.jsx)("div",{children:"'Fetching pin... Please wait\u2728'"}),Object(a.jsx)("div",{className:"pin-display",children:Object(a.jsx)("div",{children:i})})]})}n(130);function et(e){var t=function(t){e.keyUp(t)};return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{children:[Object(a.jsx)("caption",{children:e.enteredPin}),Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"1"}),Object(a.jsx)("td",{onClick:t,children:"2"}),Object(a.jsx)("td",{onClick:t,children:"3"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"4"}),Object(a.jsx)("td",{onClick:t,children:"5"}),Object(a.jsx)("td",{onClick:t,children:"6"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"7"}),Object(a.jsx)("td",{onClick:t,children:"8"}),Object(a.jsx)("td",{onClick:t,children:"9"})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:t,children:"\u2190"}),Object(a.jsx)("td",{onClick:t,children:"0"}),Object(a.jsx)("td",{onClick:t,children:"OK"})]})]})]})})}function tt(){var e=Object(s.useContext)(on),t=Object(s.useState)(""),n=Object(r.a)(t,2),i=n[0],o=n[1];Object(s.useEffect)((function(){return O.on("joinSuccess",(function(t){e.setAll({userName:t.userName,socketId:t.socketId,sessionPin:t.pin})})),O.on("joinFailure",(function(){alert("That session doesn't seem to exist. Please try again! \ud83c\udf08")})),function(){O.removeAllListeners("joinSuccess"),O.removeAllListeners("joinFailure")}}),[e]);var c=function(e){var t;t=e.key?e.key:e.target.innerText,!isNaN(parseInt(t))&&i.length<5?o(i+t):"Backspace"===t||"\u2190"===t?o(i.substring(0,i.length-1)):"Enter"!==t&&"OK"!==t||(5===i.length?O.emit("joinSession",i):alert("Please enter a 5 digit pin"))};return Object(s.useEffect)((function(){return document.addEventListener("keyup",c),function(){document.removeEventListener("keyup",c)}})),Object(a.jsxs)("div",{className:"keypad-container",children:[Object(a.jsx)(et,{enteredPin:i,keyUp:c}),e.sessionPin&&Object(a.jsx)(u.a,{to:"/instrument"})]})}function nt(){var e=Object(s.useContext)(on).dropDownOut,t=Object(s.useContext)(on).setDropDownOut;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"hamburger",onClick:function(){t(!e)},children:[Object(a.jsx)("div",{className:"slice"}),Object(a.jsx)("div",{className:"slice"}),Object(a.jsx)("div",{className:"slice"})]})})}function at(e){return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{className:"home-link",to:"/",children:"\ud83c\udfbc"})}),Object(a.jsx)("li",{children:Object(a.jsx)(nt,{})})]})})}var st=function(e,t){e.data.note&&(pt(me.g(e.data.note+e.data.octave).toFrequency()),t&&t.keyboard.play())},it=function(e){e&&e.keyboard.stop()};var ot,ct=function(e,t){e[0]!==t.drone.one.volume.value&&(t.drone.one.volume.value=e[0]),e[1]!==t.drone.two.volume.value&&(t.drone.two.volume.value=e[1]),e[2]!==t.drone.three.volume.value&&(t.drone.three.volume.value=e[2])},rt=function(e,t){e[0]!==t.drone.one.type&&t.drone.setBuffer("one",e[0]),e[1]!==t.drone.two.type&&t.drone.setBuffer("two",e[1]),e[2]!==t.drone.three.type&&t.drone.setBuffer("three",e[2])},lt=function(e,t){e.forEach((function(e,t,n){return n[t]=me.g(e).toFrequency()})),ht(e[0]/440,e[1]/440,e[2]/440)},ut=function(e,t){e[0]?t.drone.play("one"):t.drone.stop("one"),e[1]?t.drone.play("two"):t.drone.stop("two"),e[2]?t.drone.play("three"):t.drone.stop("three")},dt=440,bt=440,mt=440,jt=440,pt=function(e){return dt=e},ht=function(e,t,n){bt=e,mt=t,jt=n},ft=function e(){ot&&(ot.keyboard.keyboardPlayer.playbackRate=Math.round(100*(dt/440+Number.EPSILON))/100,ot.drone.one.playbackRate=bt,ot.drone.two.playbackRate=mt,ot.drone.three.playbackRate=jt),window.requestAnimationFrame(e)};function vt(e,t){switch(e.instrument){case"keyboard":!function(e,t){switch(e.type){case"play":st(e,t);break;case"stop":it(t);break;default:console.error("No Note!")}}(e,t);break;case"noise":!function(e,t){t&&(e.start?t.noise.start(e):e.stop?t.noise.stop(e):t.noise.play(e))}(e,t);break;case"percussion":!function(e,t){if(t)if("rhythmMachine"===e.drum)switch(e.status){case"update":t.percussion.updateMachine(e);break;case"start":t.percussion.updateMachine(e),t.percussion.startMachine();break;case"stop":t.percussion.stopMachine()}else t.percussion.play(e.drum,e.sampleRate,e.number)}(e,t);break;case"drone":!function(e,t){t&&(lt([e.one.pitch,e.two.pitch,e.three.pitch],t),rt([e.one.wave,e.two.wave,e.three.wave],t),ct([parseInt(e.one.volume,10),parseInt(e.two.volume,10),parseInt(e.three.volume,10)],t),ut([e.one.playing,e.two.playing,e.three.playing],t))}(e,t);break;default:console.error("No such instrument: ".concat(e.instrument))}}function Ot(e,t){ot||(ot=t),e&&e.instrument&&vt(e,t)}ft(),ft(),ft(),ft();var xt={attack:.04,decay:.2,sustain:.5,release:.8},gt={one:{drum:"kick",volume:0,sampleRate:1},two:{drum:"snare",volume:0,sampleRate:1},three:{drum:"hat",volume:0,sampleRate:1},four:{drum:"tom",volume:0,sampleRate:1},five:{drum:"ride",volume:0,sampleRate:1},six:{drum:"bowl",volume:0,sampleRate:1}},kt=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){var e;return Object(le.a)(this,n),(e=t.call(this)).keyboardGain=new me.h(1).connect(e.vibrato),e.filter=new me.f({type:"lowpass",frequency:700,rolloff:-12,Q:1,gain:0}),e.envelope=new me.a(xt),e.keyboardPlayer=new me.k,e.keyboardPlayer.loop=!0,e.keyboardPlayer.loopStart=0,e.rampTo=0,e.playing=!1,e.setFirstBuffer=setInterval((function(){fe()&&(e.keyboardPlayer.chain(e.envelope,e.filter,e.keyboardGain),clearInterval(e.setFirstBuffer),e.connect(),rn())}),100),e}return Object(ue.a)(n,[{key:"play",value:function(){this.keyboardPlayer.loaded||(this.keyboardPlayer.buffer=this.getWave("sine")),this.envelope.triggerAttack(me.q()),this.playing||this.keyboardPlayer.start(me.q()),this.playing=!0}},{key:"stop",value:function(){this.playing=!1,this.envelope.triggerRelease(me.q()),this.keyboardPlayer.stop("+".concat(this.envelope.release))}}]),n}(xe),yt=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){var e;return Object(le.a)(this,n),(e=t.call(this)).droneGain=new me.h(1),e.filter=new me.f({type:"lowpass",frequency:700,rolloff:-12,Q:1,gain:0}),e.envelope=new me.a(xt),e.one=new me.k,e.two=new me.k,e.three=new me.k,e.rampTo=0,e.one.loop=!0,e.two.loop=!0,e.three.loop=!0,e.setFirstBuffer=setInterval((function(){console.log(fe()),fe()&&(e.one.buffer=e.getWave("sine"),e.two.buffer=e.getWave("sine"),e.three.buffer=e.getWave("sine"),e.envelope.chain(e.filter,e.droneGain,e.vibrato),e.one.connect(e.envelope),e.two.connect(e.envelope),e.three.connect(e.envelope),e.connect(),clearInterval(e.setFirstBuffer),rn())}),100),e}return Object(ue.a)(n,[{key:"setBuffer",value:function(e,t){var n=this[e];n.playing&&(n.stop("+".concat(this.envelope.release)),this.envelope.triggerRelease(me.q()),n.buffer=this.getWave(t),n.start(me.q()),this.envelope.triggerAttack(me.q())),n.type=t}},{key:"play",value:function(e){var t=this[e];t.buffer=this.getWave(t.type),t.playing||(t.start(me.q()),t.playing=!0,this.envelope.triggerAttack(me.q()))}},{key:"stop",value:function(e){var t=this[e];t.playing&&(t.playing=!1,t.stop("+".concat(this.envelope.release)),this.envelope.triggerRelease(me.q()))}}]),n}(xe),wt=n.p+"static/media/amradionoise.27361837.mp3",St=n.p+"static/media/analoguewhitenoise.c3b9cf21.mp3",Ct=n.p+"static/media/digitalnoise.3be42450.mp3",Nt=n.p+"static/media/feedback.2d6794ba.mp3",Dt=n.p+"static/media/guitarfeedback.85a16f4a.mp3",Et=n.p+"static/media/guitarnoise1.c8696756.mp3",Pt=n.p+"static/media/guitarnoise2.4568c6af.mp3",Rt=n.p+"static/media/guitarnoise3.acf451d7.mp3",It=n.p+"static/media/guitarnoise4.e744d313.mp3",Ft=n.p+"static/media/heavystatic.51911ee8.mp3",Mt=n.p+"static/media/micfeedback.8c3d678d.mp3",At=n.p+"static/media/radioBuzz.9070eb0d.mp3",Lt=n.p+"static/media/recordPlayerGlitch.4ff862d2.mp3",qt=n.p+"static/media/saxSqueek.5fe25053.mp3",zt=n.p+"static/media/trumpethiss.9bad6c5a.mp3",Jt=n.p+"static/media/saxSkronk.7fa1a37f.mp3",Tt=n.p+"static/media/saxSkronk2.57b804e5.mp3",Bt=n.p+"static/media/saxSkronk3.589b343f.mp3",Wt=n.p+"static/media/saxSkronk4.502fd984.mp3",Gt=n.p+"static/media/saxSkronk5.0ab0c2c2.mp3",Ht=n.p+"static/media/saxSkronk6.2a2de3de.mp3",Vt=n.p+"static/media/saxSkronk7.72cd0311.mp3",Ut=n.p+"static/media/saxSkronk8.3fc6d8e3.mp3",Kt=n.p+"static/media/saxSkronk9.12c7e2d0.mp3",Yt=n.p+"static/media/saxSkronk10.dfbd67a7.mp3",Xt=n.p+"static/media/saxSkronk11.f8e9bed7.mp3",Qt=n.p+"static/media/saxSkronk12.39c52f7d.mp3",Zt=n.p+"static/media/saxSkronk13.f3bb511f.mp3",$t=n.p+"static/media/saxSkronk14.bece53e7.mp3",_t=n.p+"static/media/aluminium.351bcc91.mp3",en=n.p+"static/media/spaceDrone.4d218f10.mp3",tn=n.p+"static/media/glitch.a68389f0.mp3";var nn=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){var e;return Object(le.a)(this,n),(e=t.call(this)).loaded=!1,e.player=new me.k,e.oscillatorGain=new me.h(.7),e.oscillatorPulverizer=new me.b(1),e.oscillator=new me.k,e.oscillator2=new me.k,e.oscillator3=new me.k,e.oscillator4=new me.k,e.samples=new me.m(an,(function(){console.log("noise samples loaded!"),rn(),e.loaded=!0,e.player.connect(e.vibrato),e.oscillatorPulverizer.chain(e.oscillatorGain,e.vibrato),e.oscillator.connect(e.oscillatorPulverizer),e.oscillator2.connect(e.oscillatorPulverizer),e.oscillator3.connect(e.oscillatorPulverizer),e.oscillator4.connect(e.oscillatorPulverizer),e.connect()})),e.nowPlaying=null,e.types={ambientNoise:["aluminium","amRadioNoise","analogueWhiteNoise","digitalNoise","heavyStatic","radioBuzz","recordPlayerGlitch","spaceDrone","trumpetHiss","glitch"],feedback:["feedback","guitarFeedback","guitarNoise1","guitarNoise2","guitarNoise3","guitarNoise4","micFeedback"],skronk:["saxSqueek","saxSkronk","saxSkronk2","saxSkronk3","saxSkronk4","saxSkronk5","saxSkronk6","saxSkronk7"],oscillators:["oscillators"]},e.initialize(),e}return Object(ue.a)(n,[{key:"randomWaveType",value:function(){var e=["sine","square","triangle","sawtooth"];return e[Math.floor(Math.random()*e.length)]}},{key:"getRandomSound",value:function(){}},{key:"initialize",value:function(){var e=this;Object.keys(this).forEach((function(t){e[t]instanceof me.k&&(e[t].loop=!0)}))}},{key:"setPlaybackRate",value:function(e){e.x<e.width/2?this.player.playbackRate=1/(e.width/(2*e.x)):this.player.playbackRate=Math.pow(1/(e.width/(2*e.x)),2.5)}},{key:"start",value:function(e){this.loaded&&this.startLogic(e)}},{key:"startLogic",value:function(e){this.oscillator.buffer=this.getWave(this.randomWaveType()),this.oscillator2.buffer=this.getWave(this.randomWaveType()),this.oscillator3.buffer=this.getWave(this.randomWaveType()),this.oscillator4.buffer=this.getWave(this.randomWaveType());var t=function(e){switch(e){case"Ambient Noise":return"ambientNoise";case"Skronk":return"skronk";case"Feedback":return"feedback";case"Oscillators":return"oscillators";default:console.log("huh?")}}(e.which),n=Math.floor(Math.random()*this.types[t].length);this.nowPlaying=this.types[t][n],Object.keys(an).includes(this.nowPlaying)?(this.player.buffer=this.samples.get(this.nowPlaying),this.setPlaybackRate(e),this.player.start(0,Math.floor(10*Math.random()))):(this.oscillator.start(me.q()),this.oscillator2.start(me.q()),this.oscillator3.start(me.q()),this.oscillator4.start(me.q()))}},{key:"stopOscillators",value:function(){this.oscillator.stop(me.q()),this.oscillator2.stop(me.q()),this.oscillator3.stop(me.q()),this.oscillator4.stop(me.q())}},{key:"stop",value:function(){"oscillators"!==this.nowPlaying?this.player.stop(me.q()):this.stopOscillators(),this.nowPlaying=null}},{key:"play",value:function(e){e.x<=.001&&(e.x=.00101),e.y<=.001&&(e.y=.00101),Object.keys(an).includes(this.nowPlaying)?this.setPlaybackRate(e):(e.x<e.width/2?(this.oscillator.playbackRate=e.x/5e3,this.oscillator4.playbackRate=.001*e.y):(this.oscillator.playbackRate=e.x+3*e.x,this.oscillator4.playbackRate=Math.random()+e.x),this.oscillator2.playbackRate=e.y+.1*Math.random(),this.oscillator3.playbackRate=e.y/2/(e.x/2))}}]),n}(xe),an={amRadioNoise:wt,analogueWhiteNoise:St,digitalNoise:Ct,feedback:Nt,guitarFeedback:Dt,guitarNoise1:Et,guitarNoise2:Pt,guitarNoise3:Rt,guitarNoise4:It,heavyStatic:Ft,micFeedback:Mt,radioBuzz:At,recordPlayerGlitch:Lt,saxSqueek:qt,trumpetHiss:zt,saxSkronk:Jt,saxSkronk2:Tt,saxSkronk3:Bt,saxSkronk4:Wt,saxSkronk5:Gt,saxSkronk6:Ht,saxSkronk7:Vt,saxSkronk8:Ut,saxSkronk9:Kt,saxSkronk10:Yt,saxSkronk11:Xt,saxSkronk12:Qt,saxSkronk13:Zt,saxSkronk14:$t,aluminium:_t,spaceDrone:en,glitch:tn},sn=function(){function e(){Object(le.a)(this,e),this.keyboard=new kt,this.drone=new yt,this.percussion=new Ve,this.noise=new nn}return Object(ue.a)(e,[{key:"setEffects",value:function(e,t){var n=this;this[e]&&Object.keys(t).forEach((function(e){n[e]&&n[e].setEffects(t[e])}))}},{key:"setSettings",value:function(e,t){var n=this[e];n&&(t.envelope&&(n.envelope&&(n.envelope.attack=t.envelope.attack,n.envelope.decay=t.envelope.decay,n.envelope.sustain=t.envelope.sustain,n.envelope.release=t.envelope.release),n.envelopeOne&&(n.envelopeOne.attack=t.envelope.attack,n.envelopeOne.decay=t.envelope.decay,n.envelopeOne.sustain=t.envelope.sustain,n.envelopeOne.release=t.envelope.release),n.envelopeTwo&&(n.envelopeTwo.attack=t.envelope.attack,n.envelopeTwo.decay=t.envelope.decay,n.envelopeTwo.sustain=t.envelope.sustain,n.envelopeTwo.release=t.envelope.release),n.envelopeThree&&(n.envelopeThree.attack=t.envelope.attack,n.envelopeThree.decay=t.envelope.decay,n.envelopeThree.sustain=t.envelope.sustain,n.envelopeThree.release=t.envelope.release)),this[e].gain.gain.value=t.volume,"keyboard"===e&&(this[e].rampTo=t.rampTo,this.keyboard.keyboardPlayer.buffer=this.keyboard.getWave(t.wave)))}}]),e}(),on=Object(s.createContext)(),cn=0,rn=function(){return cn+=1};var ln=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1];Object(s.useEffect)((function(){n&&console.log("all instruments loaded")}),[n]);var o=Object(s.useState)(!1),c=Object(r.a)(o,2),b=(c[0],c[1]),m=Object(s.useState)(null),h=Object(r.a)(m,2),f=h[0],v=h[1],g=Object(s.useState)(null),k=Object(r.a)(g,2),w=k[0],S=k[1],C=Object(s.useState)(null),N=Object(r.a)(C,2),D=N[0],E=N[1],P=Object(s.useState)(null),R=Object(r.a)(P,2),I=R[0],F=R[1],M=Object(s.useState)(null),A=Object(r.a)(M,2),L=A[0],q=A[1],z=Object(s.useState)(void 0),J=Object(r.a)(z,2),T=J[0],B=J[1],W=Object(s.useState)([]),G=Object(r.a)(W,2),H=G[0],V=G[1],U=Object(s.useState)(!1),K=Object(r.a)(U,2),Y=K[0],X=K[1],Q=Object(s.useState)(!1),Z=Object(r.a)(Q,2),$=Z[0],_=Z[1],ee=Object(s.useState)(!1),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],se=Object(s.useState)(!1),ie=Object(r.a)(se,2),oe=ie[0],ce=ie[1],re=Object(s.useState)({keyboard:{envelope:xt,volume:.5,rampTo:0,wave:"sine"},drone:{envelope:xt,volume:.5},theremin:{envelope:xt,volume:.5},noise:{volume:.5},skronk:{volume:.5},percussion:{volume:.5}}),le=Object(r.a)(re,2),ue=le[0],de=le[1],be=Object(s.useState)({keyboard:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}},drone:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}},theremin:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}},noise:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}},skronk:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}},percussion:{vibrato:{wet:{level:.5,min:0,max:1,step:.05},depth:{level:.3,min:0,max:1,step:.05},freq:{level:8,min:0,max:20,step:.05},on:!1},pulverizer:{level:{level:1,min:1,max:16,step:1},on:!1},distortion:{wet:{level:.5,min:0,max:1,step:.05},level:{level:1,min:.05,max:3,step:.05},on:!1},delay:{wet:{level:.5,min:0,max:1,step:.05},time:{level:.2,min:0,max:1,step:.05},feedback:{level:.15,min:0,max:1,step:.05},on:!1},pitchShifter:{wet:{level:.5,min:0,max:1,step:.05},shift:{level:0,min:-36,max:36,step:1},on:!1}}}),je=Object(r.a)(be,2),pe=je[0],he=je[1],fe=Object(s.useState)({one:{wave:"sine",volume:"-4",pitch:"C3",playing:!1},two:{wave:"sine",volume:"-4",pitch:"C3",playing:!1},three:{wave:"sine",volume:"-4",pitch:"C3",playing:!1}}),ve=Object(r.a)(fe,2),Oe=ve[0],xe=ve[1],ge=Object(s.useState)(gt),ke=Object(r.a)(ge,2),ye=ke[0],we=ke[1],Se=Object(s.useState)(!1),Ce=Object(r.a)(Se,2),Ne=Ce[0],De=Ce[1],Ee=Object(s.useState)("90"),Pe=Object(r.a)(Ee,2),Re=Pe[0],Ie=Pe[1],Fe=Object(s.useState)("4"),Me=Object(r.a)(Fe,2),Ae=Me[0],Le=Me[1];Object(s.useEffect)((function(){document.addEventListener("click",(function e(){var t=function(){me.r(),v(new sn),_(!0)};"suspended"!==me.p.state?t():(b(!0),console.log("Use Chrome please",me.p.destination.volume.value),me.p.destination.volume.value=-3,me.p.resume(),me.p.lookAhead=.2,me.p.on("statechange",(function(){t()})));var n=setInterval((function(){3===cn&&(console.log("yay!"),i(!0),clearInterval(n))}),10);document.removeEventListener("click",e,!1)}))}),[]),Object(s.useEffect)((function(){console.log("Username has been set to "+I),console.log("Socket Id was set to: "+D),console.log("Session pin was set to "+w)}),[I,D,w]),Object(s.useEffect)((function(){var e=function(e){V(e)};return O.on("newMember",e),O.on("instrumentChange",e),H.length&&console.info(H),function(){O.removeAllListeners("instrumentChange",e),O.removeAllListeners("newMember",e)}}),[H]),Object(s.useEffect)((function(){console.log("instrument changed to "+T),w&&O.emit("instrumentChange",T,w,I)}),[T,w,I]),Object(s.useEffect)((function(){if(!w){var e=function(e){E(e),Ot({data:"userUpdate",users:[{socketId:e,instrument:T}]})};return O.emit("getSocketId"),O.on("getSocketId",e),function(){O.removeAllListeners("getSocketId",e)}}}),[T,w]),Object(s.useEffect)((function(){Ot({data:"userUpdate",users:H.users})}),[H]),Object(s.useEffect)((function(){var e=function(e,t){Ot(e,f)};return O.on("musicData",e),function(){O.removeAllListeners("musicData",e)}})),Object(s.useEffect)((function(){var e=function(e,t,n,a){x(e,t,n,a,!0,f);var s=JSON.parse(JSON.stringify(ue));s[n]=e,de(s)};return O.on("settingsChange",e),function(){return O.removeAllListeners("settingsChange",e)}})),Object(s.useEffect)((function(){var e=function(e,t,n,a){y(e,t,n,a,!0,f),he(e)};return O.on("effectsChange",e),function(){return O.removeAllListeners("settingsChange",e)}})),Object(s.useEffect)((function(){w?L&&(O.emit("musicData",L,w,I),q(null)):L&&(Ot(L,f),q(null))}),[L,w,I,f]);var qe={one:{drum:ye.one,times:new Array(4*Ae)},two:{drum:ye.two,times:new Array(4*Ae)},three:{drum:ye.three,times:new Array(4*Ae)},four:{drum:ye.four,times:new Array(4*Ae)},five:{drum:ye.five,times:new Array(4*Ae)},six:{drum:ye.six,times:new Array(4*Ae)}},ze=Object(s.useState)(qe),Je=Object(r.a)(ze,2),Te=Je[0],Be=Je[1];return Object(a.jsx)(on.Provider,{value:{instrumentsLoaded:n,soundSet:f,sessionPin:w,socketId:D,userName:I,setSessionPin:S,setSocketId:E,setUserName:F,setAll:function(e){S(e.sessionPin),E(e.socketId),F(e.userName)},musicData:L,setMusicData:q,myInstrument:T,setMyInstrument:B,users:H,setUsers:V,host:Y,setHost:X,globalInstrumentSettings:ue,setGlobalInstrumentSettings:de,globalEffectsSettings:pe,setGlobalEffectsSettings:he,droneData:Oe,setDroneData:xe,getGlobalEffects:function(){return JSON.parse(JSON.stringify(pe))},getGlobalSettings:function(){return JSON.parse(JSON.stringify(ue))},percussionData:ye,setPercussionData:we,drumMachinePlaying:oe,setDrumMachinePlaying:ce,bpm:Re,setBpm:Ie,timeSignature:Ae,setTimeSignature:Le,loopData:Te,setLoopData:Be,loopObject:qe,keyboardInfinity:Ne,setKeyboardInfinity:De,dropDownOut:ne,setDropDownOut:ae,audioContextStarted:$},children:Object(a.jsx)(l.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(d,{sessionPin:w,sessionId:D,userName:I}),Object(a.jsx)(at,{}),Object(a.jsx)(u.b,{path:"/",exact:!0,component:j}),Object(a.jsx)(u.b,{path:"/about",component:p}),Object(a.jsx)(u.b,{path:"/host",component:_e}),Object(a.jsx)(u.b,{path:"/join",component:tt}),Object(a.jsx)(u.b,{path:"/instrument",component:$e})]})})})},un=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(ln,{})}),document.getElementById("root")),un()},32:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},42:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},86:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.6ee3e21c.chunk.js.map